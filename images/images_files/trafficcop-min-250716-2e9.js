var TrafficCop;(()=>{"use strict";var t={d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{function i(t,e){return Math.floor(Math.random()*e)+t}t.r(e),t.d(e,{TrafficCop:()=>a}),window.pg=window.pg||{};var o=window.pg;class n{constructor(){var t=this;return function(e){for(var i in e=e||{})t[i]=e[i];t.code=t.code||"",t.baseCode=t.baseCode||t.code,t.slot=t.slot||"",t.baseSlot=t.baseSlot||t.slot,t.replaceUnitCodeVariables(),t.bids=t.bids||[],t.device=t.device||"all",t.m2_stack=Array.from(new Set(t.m2_stack||["enabled"])),t.mediaTypes=t.mediaTypes||{},t.autozone=t.autozone||"off",t.driftingEnabled=!1,t.drifterId=void 0}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}replaceUnitCodeVariables(){o.unitVariables=o.unitVariables||{},o.unitVariables.hour=o.unitVariables.hour||(new Date).getUTCHours(),o.unitVariables.domain=o.unitVariables.domain||o.publisher.getAutozoneSubdomain();for(const t of o.publisher.utms)o.unitVariables[t]=o.unitVariables[t]||o.visitor.getUtm(t);this.format&&(o.unitVariables.format=o.unitVariables.format||this.format);for(const t in o.unitVariables)this.code=this.code.replace("{"+t+"}",o.unitVariables[t]),this.slot=this.slot.replace("{"+t+"}",o.unitVariables[t])}isOutOfPage(){var t=[];return this.baseCode.toLowerCase().indexOf("1x1")>=0&&t.push("1x1"),this.baseCode.toLowerCase().indexOf("interstitial")>=0&&t.push("interstitial"),this.baseCode.toLowerCase().indexOf("outstream")>=0&&t.push("outstream"),this.baseCode.toLowerCase().indexOf("rewarded")>=0&&t.push("rewarded"),(this.oop||this.baseCode.toLowerCase().indexOf("out-of-page")>=0||this.baseCode.toLowerCase().indexOf("outofpage")>=0||this.baseCode.indexOf("OOP")>=0)&&t.push("oop"),(this.isAnchorUnit()||["sticky-left","sticky-right"].indexOf(this.autozone)>=0)&&t.push("autozone"),t.length>0&&t}isAutozone(){return!!this.autozone&&"off"!==this.autozone}isAnchorUnit(){return"string"==typeof this.autozone&&this.autozone.includes("anchor")}isFixed(){return this.code.toLowerCase().includes("1x1")||this.isAnchorUnit()||this.isAutozone()||o.isNodeFixedOrSticky(this.getNode())}getTerms(){const t=o.publisher.getNetworkCode(),e=this.code.replace("/"+t+"/",""),i=[this.code,e],n=this.getShortCode();if(n!=e&&i.push(n),this.slot&&i.push(this.slot),this.code.indexOf(",")>-1){const t=o.publisher.getNetworkParentCode();t&&i.push("/"+t+"/"+e);const n=o.publisher.getNetworkChildCode();n&&i.push("/"+n+"/"+e)}return i}getShortCode(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){const t=this.code.split("/").filter((function(t){return t})).slice(-2);return this.isChild?t[0]+"/"+this.childCount:t.join("/")}return this.code.split("/").filter((function(t){return t})).slice(1,2).pop()}renderedUnitAnalytics(t,e,i,n){try{var c={stream:"ad_render",unit:e.slot.getAdUnitPath(),orderId:e.campaignId,lineItemId:e.sourceAgnosticLineItemId,creativeId:e.sourceAgnosticCreativeId,timestampInit:o.timestamps.started,timeToRender:o.timestamps.now()-o.timestamps.started,renderCount:t.renderCount,size:o.flattenSizes(e.size).pop(),bidder:"null",bid:0,winner:"??",aspv:"",coordinates:"",documentSize:"",collisionDetected:"",viewPort:"",collidingCoordinates:"",event:"",renderDuration:""};c.environment=c.environment||{},c.environment.backfilled=void 0===n?"na":n?"prebid":"failed",c.environment.floorSource=o.publisher.floorSource,c.environment.floorSelectedTargeting=t.floorSelectedTargeting,c.environment.floorFallback={country:o.visitor.fallbackCountry,offset:(new Date).getTimezoneOffset()},c.environment.adRenderSource=i,c.environment.m2Stack=t.m2_stack&&Array.from(t.m2_stack).join(",")||"na",c.environment.lazyLoaded=!!t.lazyLoaded,t.lazyLoaded=!1,(o.publisher.spa||t.lazyCase)&&(c.environment=c.environment||{},c.environment.lazyCase=t.lazyCase||0),"tc"!==i&&(c.floorValue=parseFloat(t.temporalFloor||t.floor).toFixed(2),c.floorStatus=t.floorStatus||"unset","dynamic"===o.publisher.floorSource&&(c.floorExploit=t.floorExploit,c.floorVersion=t.floorVersion||o.publisher?.floorMapDynamic?.floorVersion||"NA",c.floorArm=t.floorArm,c.floorArmValue=t.floorArmStr,c.floorArmHash=t.floorArmKvp)),c.environment.rebidMultiplier=t.multiplier,c.adRenderId=o.uuid4(),o.impressionList=o.impressionList||{},c.unit in o.impressionList&&(o.impressionList[c.unit].renderDuration=o.timestamps.now()-(o.impressionList[c.unit].timestampInit+o.impressionList[c.unit].timeToRender),o.impressionList[c.unit].event=!0===t.unfilledRefresh?"unfilled-refresh":"refresh",o.impressionList[c.unit].viewedGam=null!==t.viewedAt,o.impressionList[c.unit].environment.adRenderSource=i,o.logAdRender(o.impressionList[c.unit])),o.impressionList[c.unit]=c,window.googletag&&window.googletag.pubadsReady&&(c.environment.initialLoadDisabled=window.googletag.pubads().isInitialLoadDisabled()),o.log("slot attributes","unit"),o.log("sampling adRender to analytics endpoint","unit");let a=null;if(e.slot.getTargeting("m2_bidder")&&e.slot.getTargeting("m2_bidder").length>0&&(c.bidder=e.slot.getTargeting("m2_bidder").pop(),o.log(" + bidder["+c.bidder+"]","unit")),e.slot.getTargeting("m2_pb")&&e.slot.getTargeting("m2_pb").length>0&&(c.bid=Number(e.slot.getTargeting("m2_pb").pop()),o.log(" + bid["+c.bid+"]","unit")),!c.size&&e.slot.getTargeting("m2_size")&&e.slot.getTargeting("m2_size").length>0&&(c.size=e.slot.getTargeting("m2_size").pop(),o.log(" + bid size["+c.m2_size+"]","unit")),e.slot.getTargeting("m2_pid")&&e.slot.getTargeting("m2_pid").length>0&&(c.pid=e.slot.getTargeting("m2_pid").pop(),o.log(" + pid["+c.pid+"]","unit")),e.slot.getTargeting("m2_adid")&&e.slot.getTargeting("m2_adid").length>0){var r=e.slot.getTargeting("m2_adid").pop();window.pg.isPrebidInit()&&window.pg.auction.wrappers.prebid.wonBidIds.indexOf(r)>=0&&(c.bidder&&"gb-adsense"==c.bidder?c.winner="gb-adsense":c.winner="pghb")}if(e.sourceAgnosticLineItemId&&"??"===c.winner&&(c.winner="gam"),e.sourceAgnosticLineItemId&&!e.isEmpty||(c.winner="unfilled",c.environment.isEmpty=e.isEmpty),a&&("unfilled"===c.winner?c.bidderCpm=0:["pghb","gb-adsense"].includes(c.winner)?c.bidderCpm=a.cpm:c.bidderCpm=-1),e.isEmpty)o.log("AdUnit["+t.code+"] rendered with empty slot, not checking ASPV","publisherIVT");else{const i=c.bidder;let o=t.aspvDetection(e,i);c=Object.assign(c,o)}if(!c.coordinates){const e=t.node||t.getNode();if(e){const{x:i,y:n,width:r,height:a}=o.getUnitCoordinate(e,t.isFixed());c.coordinates=[i,n,r,a].toString()}else c.coordinates="NA"}o.coordinateDict&&o.coordinateDict[t.code]&&(o.coordinateDict[t.code].isEmpty=e.isEmpty),o.log(" + winner["+c.winner+"] AdUnit["+t.code+"] floorValue["+c.floorValue+"] floorStatus["+c.floorStatus+"] renderCount["+c.renderCount+"]"),o.logAdRender(c)}catch(t){window.pg.warn("failed to log ad render"),window.pg.warn(t)}}aspvDetection(t,e){try{var i=this.code,n=this.node,c=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),r=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),a={};if(a.viewPort=c+"*"+r,o.coordinateDict=o.coordinateDict||{},n&&n.getBoundingClientRect){var s=o.getUnitCoordinate(n,this.isFixed());if(void 0!==s.height&&s.height>0){s.height>1&&(window.getComputedStyle&&"none"===window.getComputedStyle(n).display?(o.log("ASPV AdUnit["+i+"] element is hidden using display-none","publisherIVT"),a.aspv="adunit-display-none",o.warn(a.aspv)):window.getComputedStyle&&"hidden"===window.getComputedStyle(n).visibility&&(o.log("ASPV AdUnit["+i+"] element is hidden using visibility-hidden","publisherIVT"),a.aspv="adunit-visibility-hidden",o.warn(a.aspv)));var d=document.body,l=document.documentElement;let p=Math.max(d.scrollHeight,l.scrollHeight,d.offsetHeight,l.offsetHeight,d.clientHeight,l.clientHeight),m=Math.max(d.scrollWidth,d.offsetWidth,l.offsetWidth,d.clientWidth,l.clientWidth);if(a.documentSize=p+"*"+m,t.size&&t.size.length>1&&(s.width=s.width<t.size[0]?t.size[0]:s.width,s.height=s.height<t.size[1]?t.size[1]:s.height),a.coordinates=[s.x,s.y,s.width,s.height].toString(),o.log("ASPV AdUnit["+i+"] rendered","publisherIVT"),(s.x<0||s.y<0||p<s.y+s.height||m<s.x+s.width)&&"1x1"!=a.size&&!this.isFixed()){var u={};u.viewPortHeight=r,u.viewPortWidth=c,u.documentSize=m+"*"+p,u.unit=i,u.coordinates=[s.x,s.y,s.width,s.height].toString(),u.adUnitSize=Math.round(s.width)+"x"+Math.round(s.height),u.bidder=e,u.aspvAreaPercentage=function(t,e,i){let o=0,n=0;if(t.x>e||t.y>i||t.x+t.width<0||t.y+t.height<0)return 100;t.x+t.width>e?o=t.x+t.width-e:t.x<0&&(o=-t.x),t.y+t.height>i?n=t.y+t.height-i:t.y<0&&(n=-t.y);const c=t.width*t.height;return(100*(c-(t.width-o)*(t.height-n))/c).toFixed(2)}(s,m,p);var h={category:["adunit"],hasParams:!0,name:"ASPV ad-unit["+u.unit+"] element is out of document",code:"ad_setup_policy_violation_adunit_out_of_document",params:u};o.warn("Ad Setup policy violation ad-unit["+i+"] element is out of document","publisherIVT",h),o.logEvent(h)}s.renderedTime=o.timestamps.now(),s.renderedCount=this.renderCount,Object.keys(o.coordinateDict).forEach((function(t){var n=o.coordinateDict[t];if(!s.isAutozone&&!n.isAutozone&&t!=i){if(n.isEmpty)return void o.log("AdUnit["+t+"] has empty slot, skip unit for adstacking check","publisherIVT");let u=n.unit||o.getUnit(t),h=!1,p=!1;if(u&&(p=u.getNode(),p&&(h=o.getUnitCoordinate(p,u.isFixed()))),h&&(n.x=h.x,n.y=h.y,n.width=h.width,n.height=h.height),s.x<n.x+n.width&&s.x+s.width>n.x&&s.y<n.y+n.height&&s.y+s.height>n.y){a.collidingCoordinates=[n.x,n.y,n.width,n.height].toString(),a.collisionDetected=t,a.aspv="adunit-collision-detected";var d={};d.viewPortHeight=r,d.viewPortWidth=c,d.bidder=e,i.toLowerCase()>t.toLowerCase()?(d.adUnit1=i,d.adUnit2=t,d.adUnit1Size=Math.round(s.width)+"x"+Math.round(s.height),d.adUnit2Size=Math.round(n.width)+"x"+Math.round(n.height),d.coordinates=a.coordinates,d.collidingCoordinates=a.collidingCoordinates):(d.adUnit1=t,d.adUnit2=i,d.adUnit1Size=Math.round(n.width)+"x"+Math.round(n.height),d.adUnit2Size=Math.round(s.width)+"x"+Math.round(s.height),d.coordinates=a.collidingCoordinates,d.collidingCoordinates=a.coordinates);var l={category:["adunit"],hasParams:!0,name:"Unit["+d.adUnit1+"] is colliding or stacked with unit["+d.adUnit2+"]",code:"ad_setup_policy_violation_adunit_collision/stacking",params:d};o.warn("Detected collision/ad-stacking b/w unit["+d.adUnit1+"] and unit["+d.adUnit2+"]","publisherIVT",l),o.logEvent(l)}}})),s.unit=this,o.coordinateDict[i]=s}else a.coordinates="0,0,0,0",a.aspv="no-adunit",o.log("Ad unit with height zero","publisherIVT");return a}}catch(t){t.code="aspv-exception",t.environment={unit:this.code},t.type="catch",o.logEvent(t)}}getNode(t){if(!this.node||t)if(void 0===this.slot)this.node=!1,o.log(" ! node could not be obtained for unit["+this.code+"], no slot defined");else if(this.node=document.getElementById(this.slot),!this.node&&this.isOutOfPage()||this.framebust){let t=[];o.publisher.onpageLazy&&t.push(document.getElementsByClassName("pg-lazy")),o.publisher.onpageAttr&&t.push(document.getElementsByClassName("pg-ad")),o.publisher.onpagePgtag&&t.push(document.getElementsByTagName("pubguru")),t.length&&t.forEach((t=>{if(t&&t.length)for(var e=t.length-1;e>=0;e--){var i=t[e];if(i.hasAttribute("data-gpt-parent")&&(i.setAttribute("data-pg-ad",i.getAttribute("data-gpt-parent")),i.removeAttribute("data-gpt-parent")),i.getAttribute("data-pg-ad")==this.slot)return this.node=i,i.id?o.logEvent({code:"oop_node_slot_id_mismatch",environment:{unit:this.code,slot:this.slot,id:i.id,framebust:this.framebust,outofpage:this.isOutOfPage()}}):i.id=this.slot,i}}))}return this.node}}class c{init(t){}logPageview(t){}appendBaseAnalytics(t){}setKvps(t){}}window.pg=window.pg||{};var r=window.pg;class a extends c{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();for(const e in t)this[e]=t[e];this.counter=50,this.pvActivity={},this.activityCounter=50,this.userActivity=[],this.lastAdClickId="na",this.lastAdClickTs=0,this.lastScrollEndTs=0,this.lastPointerMoveTs=0,this.blurTs=0,this.focusReturnTs=0,this.ctrlKeyPressed=!1,this.shiftKeyPressed=!1}init(){}start(){this.botThreshold=this.botThreshold||r.publisher.trafficCopBotThreshold||75,this.testTrafficPercent=(r.get("pg_tc")||r.debug?100:r.visitor.tcTestPercent)||100,this.tcDropoutPercent=1,this.m2TCKvp="tc-init",this.activeClickTimeout=3e3,this.reCaptchaV3SiteKey="6LfCza4oAAAAAMprJY1O0Y-bOJByaJuTtEqrZX9B",this.timeoutAction=this.timeoutAction||r.publisher.trafficCopTimeoutAction||"measure",this.timeoutDuration=this.timeoutDuration??r.publisher.trafficCopTimeoutDuration??500,r.visitor.ivtAction=window.__tcMode||r.visitor.ivtAction||r.publisher.trafficCopIvtAction||"measure",this.captchaService=this.captchaService||r.publisher.trafficCopCaptchaService||"reCaptcha",this.trafficCopOverClock=this.trafficCopOverClock||r.publisher.trafficCopOverClock||!1,this.trafficCopOverClock&&(this.timeoutDuration=Math.max(r.publisher.trafficCopTimeoutDuration,500),this.timeoutAction="block"),["measure","block","nocaptcha"].indexOf(r.visitor.ivtAction)>=0?r.log("mode["+r.visitor.ivtAction+"]","tc"):(r.logEvent("tc-invalid-ivt-action"),r.warn("mode["+r.visitor.ivtAction+"]","tc"),r.visitor.ivtAction="measure"),this.fouSampling=r.publisher.trafficCopFouAnalytics||.01,this.trafficCopEndpoint=this.trafficCopEndpoint||r.publisher.trafficCopEndpoint||r.getAnalyticsUrl("/tc"),this.onpageUnits=[],this.clickBlockerEnabled=this.clickBlockerEnabled||r.publisher.trafficCopClickBlocker||!1,this.clickBlockerThreshold=this.clickBlockerThreshold||r.publisher.trafficCopClickBlockerThreshold||3,this.clickBlockerInterstitialThreshold=this.clickBlockerInterstitialThreshold||r.publisher.trafficCopClickBlockerInterstitialThreshold||30,this.localStorageUpdated=this.localStorageUpdated||!1;try{if(r.visitor.pgUser=r.visitor.cookie("pg_lava"),(r.visitor.pgUser||0==this.timeoutDuration)&&(r.log("Detected pg user cookie or timeoutDuration is 0ms","tc"),r.visitor.ivtAction="measure"),!r.cmp.trackable())return r.log("sampling off, not running for EU with country["+r.visitor.geolocate().country+"], ","tc"),r.atq.xq(),!1;if("not-sampled"==r.visitor.cookie("pg_tc")&&!r.get("pg_tc"))return r.log("sampling off","tc"),r.atq.xq(),!1;if(r.visitor.shoudRunTc||r.get("pg_tc")||"sample"==r.visitor.cookie("pg_tc")){if(r.log("measuring and initializing","tc"),r.visitor.cookie("pg_tc","sample",1),this.testTraffic=!0,"block"===r.visitor.ivtAction&&"reCaptchaV3"===r.tc.captchaService){const t=`https://www.google.com/recaptcha/api.js?render=${r.tc.reCaptchaV3SiteKey}`;r.loadJS(t,!0)}if(window.addEventListener("scroll",r.tc.onScrollHandler,!1),window.addEventListener("touchstart",r.tc.touchStartHandler,!1),window.addEventListener("touchmove",r.tc.touchMoveHandler,!1),window.addEventListener("mousemove",r.tc.mouseMoveHandler,!1),window.addEventListener("click",r.tc.mouseClickHandler,!1),window.addEventListener("keypress",r.tc.keyPressHandler,!1),window.addEventListener("blur",r.tc.windowBlurHandler,!1),window.addEventListener("focus",r.tc.windowFocusHandler,!1),void 0!==window.onscrollend&&window.addEventListener("scrollend",r.tc.scrollEndHandler,!1),r.tc.pvInterval=setInterval((function(){const t=(new Date).getTime()-r.timestamps.started;r.visitor.cookie("pv_time-"+r.visitor.getSessionDepth(),t,1)}),250),window.setTimeout((function(){r.tc.clearIntervalFunction()}),1e3),setInterval((function(){const t=(new Date).getTime()-r.timestamps.started;r.visitor.cookie("pv_time-"+r.visitor.getSessionDepth(),t,1)}),5e3),window.onbeforeunload=function(){r.tc.onUnloadHandler()},r.visitor.geolocate(),r.tc.saveDeviceParams(),r.drq.push((function(){window.pg.tc.setupHoneyPot(),r.tc.slotRenderEnded()}),"drqTcHoneyPot"),this.userActivityInterval=setInterval(r.tc.updateUserActivityPackets,50),this.getBotPercent()<r.publisher.trafficCopBotThreshold&&this.sendPageViewData(),this.fouSampling>Math.random()){const t="https://api.fouanalytics.com/api/init-565hn40wyj5jh7gkoy1.js",e="?domain="+r.publisher.getBaseDomain()+"&pageviewId="+r.visitor.pageviewId;r.loadJS(t+e)}1==r.visitor.getSessionDepth()&&setTimeout((function(){r.tc.processorLatency(100)})),r.drq.push((()=>{this.sendDeviceData()}),"detect-device-details"),r.atq.push((()=>{this.listenUnitClicks()}),"detect-adunit-clicks")}else r.visitor.cookie("pg_tc","not-sampled",1),r.log("not measuring","tc");r.log(this)}catch(t){t.code="pg-tc-init",t.type="catch",r.logEvent(t),r.atq.xq()}return!1}setKvps(t){r.log("set traffic cop kvps"),r.initialM2Stack.push(r.tc.m2TCKvp),t.forEach((t=>t.m2_stack.push(r.tc.m2TCKvp)))}clearIntervalFunction(){window.clearInterval(r.tc.pvInterval)}getPublisherUrl(){return location.protocol+"//"+location.host+location.pathname}processorLatency(t){const e=(new Date).getTime(),i=[...Array(t)].map((e=>new Array(t).fill(1)));let o,n,c;for(o=0;o<i.length;o++)for(n=0;n<i.length;n++)for(c=0;c<i.length;c++)i[o][n]=i[o][n]+i[o][c]*i[c][n];const a=(new Date).getTime()-e;return r.visitor.cookie("pg_pl",a),r.log("processorLatency elapsed["+a+"]","tc"),a}saveDeviceParams(){r.visitor.cookie("pg_tc_platform")&&(r.tc.platform=r.visitor.cookie("pg_tc_platform"),r.tc.model=r.visitor.cookie("pg_tc_model"),r.tc.platformVersion=r.visitor.cookie("pg_tc_platform_version")),navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","model"]).then((t=>{r.tc.platform=t.platform,r.tc.platformVersion=t.platformVersion,r.tc.model=t.model,r.visitor.cookie("pg_tc_platform",r.tc.platform,1),r.visitor.cookie("pg_tc_platform_version",r.tc.platformVersion,1),r.visitor.cookie("pg_tc_model",r.tc.model,1),r.log("Fetched device details successfully!","client-hints")})).catch((t=>{r.log("Error fetching high-entropy values:",t)}))}demoCaptchaCallBack(){r.tc.demoCaptchaSolved=!0;const t=document.getElementById("m2_bot_captcha");return t&&t.parentNode.removeChild(t),r.tc.m2TCKvp="demo-blocked-pass",r.atq.xq(),!0}captchaClose(t){if(r.log("captcha closed, ads not to be loaded but execution proceeded","tc"),!t)return void r.warn("captcha close was not passed a valid id","tc");r.tc.captchaShown=!1;const e=document.getElementById(t);e?(e.parentNode.removeChild(e),r.visitor.store("captcha_close_session",1)):r.warn("captcha close could not find the captcha modal","tc"),r.aivtq.xq()}captchaCloseCallback(t){if(!t)return void r.warn("captcha close callback was not passed with id","tc");const e=document.getElementById(t);if(e){const t="window.top.pg.tc.captchaClose('"+e.id+"')";e.firstChild.innerHTML+='<span aria-hidden="true" style="position: absolute;top: 5px;right: 9px;width: 15px;height: 25px;font-size: 25px;cursor: pointer;" onclick="'+t+'; return false;">Ã—</span>'}else r.warn("captcha callback could not find the captcha modal","tc")}captchaCallBack(){try{document.getElementById("m2_bot_captcha").disabled=!0;const t=grecaptcha.getResponse(),e={recaptchaResponse:t,publisher:r.publisher.getName(),timestamp:(new Date).getTime(),tcCaptchaReason:r.visitor.cookie("m2_bot_reason")||""};if(e.reporting=this.addReportingPacket(),e.reporting.riskLevel=r.visitor.cookie("m2_bot_percent"),t&&""!=t){const t=r.getAnalyticsUrl("/captcha"),i=new XMLHttpRequest;i.open("POST",t,!0),i.onload=function(){try{const t=i.status;if(200===t)if(!0===JSON.parse(i.responseText).success){r.tc.captchaShown=!1;const t=document.getElementById("m2_bot_captcha");t&&t.parentNode.removeChild(t),r.tc.m2TCKvp="blocked-pass",r.tc.sendCaptchaSolvedData(),r.log("Captcha accepted!","tc"),r.visitor.cookie("m2_captcha_solved",!0,1),r.tc.trafficCopOverClock||r.tc.clickBlockerEnabled&&r.visitor.cookie("pg_tc_cb")||r.atq.xq()}else r.log("Incorrect captcha, response status["+t+"]","tc"),r.visitor.cookie("m2_captcha_failed",!0,1),grecaptcha.reset();else r.log("Error checking google re-captcha, statusCode["+t+"]","tc"),document.getElementById("m2_bot_captcha").disabled=!1}catch(t){r.log("Error in onload function: "+t)}},i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),i.send(JSON.stringify(e))}}catch(t){r.log("Error sending request to captcha Check: "+t)}}sendCaptchaAnalytics(t,e){try{const i={},o="tc_captcha";i.tcCaptchaReason=r.visitor.cookie("m2_bot_reason")||"",i.tcCaptchaUsed=e,i.tcCaptchaType=t,i.riskLevel=r.visitor.cookie("m2_bot_percent"),i.timestamp=(new Date).getTime();const n=Object.assign({},i,r.tc.addReportingPacket());n.stream=o,r.log("captcha analytics packet","tc"),r.beacon.push(o,n)}catch(t){t.code="tc-captcha-request-exception",t.type="catch",r.logEvent(t)}}reCaptchaFallback(){const t=document.getElementById("m2_bot_captcha");t&&t.parentNode.removeChild(t),r.log("Failed to load reCaptcha, using pgCaptcha","tc"),r.tc.fetchAndShowCaptcha(),r.logEvent({code:"tc_reCaptcha_failed"})}fetchInvisibleCaptchaScore(){grecaptcha.ready((function(){grecaptcha.execute(r.tc.reCaptchaV3SiteKey,{action:"IVT"}).then((function(t){const e={recaptchaV3Token:t,publisher:r.publisher.getName(),timestamp:(new Date).getTime(),tcCaptchaReason:r.visitor.cookie("m2_bot_reason")||""};if(e.reporting=r.tc.addReportingPacket(),e.reporting.riskLevel=r.visitor.cookie("m2_bot_percent"),t){const t=r.getAnalyticsUrl("/recaptcha_v3"),i=new XMLHttpRequest;i.open("POST",t,!0),i.onload=function(){try{const t=i.status;if(200===t){const e=JSON.parse(i.responseText);e.success?e.score>=.4&&(r.tc.captchaScore=e.score,r.tc.captchaShown=!1,r.tc.sendCaptchaSolvedData(),r.log("Captcha accepted!","tc"),r.visitor.cookie("m2_captcha_solved",!0,1),r.tc.trafficCopOverClock||r.tc.clickBlockerEnabled&&r.visitor.cookie("pg_tc_cb")||r.atq.xq()):(r.log("Incorrect captcha, response status["+t+"]","tc"),r.visitor.cookie("m2_captcha_failed",!0,1))}else{r.log("Error checking google re-captcha v3 score, statusCode["+t+"]","tc");const e={code:"recaptcha_endpoint_check_failed",type:"catch",environment:{statusCode:t}};r.logEvent(e)}}catch(t){r.log("Error in onload function: "+t,"tc")}},i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),i.send(JSON.stringify(e))}else r.log("No token recieved from reCaptcha invisible!","tc"),r.tc.fetchAndShowCaptcha()}))}))}loadInvisibleCaptcha(){const t=e=>{"undefined"!=typeof grecaptcha?(r.tc.fetchInvisibleCaptchaScore(),r.logEvent("tc_recaptcha_v3_load_success")):e>0?setTimeout((()=>t(e-1)),500):(r.log("Failed loading reCaptcha V3 after multiple requests, switching to pgCaptcha","tc"),r.logEvent("tc_recaptcha_load_failed_token_still_missing"),r.tc.fetchAndShowCaptcha())};t(5)}getCurrentTimestamp(){return Math.floor(Date.now()/1e3)}getFrequencyInLastXdays(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;const i=r.visitor.localStorage(e)||[],o=this.getCurrentTimestamp(),n=[];return i.forEach((e=>{const i=o-e;Math.floor(i/86400)<t&&n.push(e)})),r.visitor.localStorage(e,n),n.length}checkNetworkLogs(){try{const t=performance.getEntriesByType("resource"),e={GAM:{domain:"securepubads.g.doubleclick.net",pattern:"/gampad/ads?"},AdSense:{domain:"pagead2.googlesyndication.com",pattern:"/ads?"},AdServices:{domain:"googleads.g.doubleclick.net",pattern:"/ads?"}},i=Object.entries(e).reduce(((e,i)=>{let[o,n]=i;const c=t.filter((t=>t.name.includes(n.domain)&&t.name.includes(n.pattern)));return c.length>0&&(e[o]=c.length),e}),{});if(Object.keys(i).length>0){const t={code:"tc_incorrect_block_mode_implementation",type:"catch",environment:{adRequests:i,url:window.location.href,gptLoaded:void 0!==window.googletag}};r.logEvent(t),r.log("Ad requests detected: "+JSON.stringify(i),"tc")}return i}catch(t){return r.log(`Error checking ad requests: ${t}`,"tc"),{}}}showCaptcha(t){if(void 0===r.tc.timeoutActionExecuted&i(0,99)<20&&r.tc.checkNetworkLogs(),r.tc.trafficCopOverClock||"nocaptcha"==r.visitor.ivtAction)return r.warn("ivt detected, but skipping captcha and executing aivtq","tc"),r.aivtq.xq(),!1;if(r.visitor.store("captcha_close_session")&&r.publisher.trafficCopCaptchaClose)return r.warn("captcha previously closed, skipping captcha","tc"),r.aivtq.xq(),!1;let e=r.tc.captchaService||"reCaptcha";if("block"!=r.visitor.ivtAction)return r.log("not showing captcha for measurement only, running atq","tc"),r.atq.xq(),!1;if(this.isCaptchaCheckDone)return!1;if("undefined"!=typeof grecaptcha&&"reCaptchaV3"!==e&&(e="pgCaptcha",r.logEvent("multiple-google-recaptcha-onpage")),this.isCaptchaCheckDone=!0,"captcha"!==r.get("pg_tc")&&"block"==r.visitor.ivtAction&&i(1,100)<=this.tcDropoutPercent)return r.tc.m2TCKvp="dropout",r.tc.fillTrafficCopPacket(),r.log("Sending packet to TC for drop out","tc"),this.sendModelData(r.tc.modelInput,0,1),r.atq.xq(),!1;if(r.visitor.pgUser&&!r.get("pg_tc"))return r.log("Detected pg user, not showing captcha","tc"),r.logEvent({code:"captcha_not_shown_lava"}),void r.atq.xq();const o=r.visitor.localStorage("pg_modal_views")||[];if(o.push(this.getCurrentTimestamp()),r.visitor.localStorage("pg_modal_views",o),t=t||"window.top.pg.tc.captchaCallBack()","reCaptchaV3"==e)r.tc.loadInvisibleCaptcha();else if("reCaptcha"==e){r.loadJS("https://www.google.com/recaptcha/api.js?hl="+navigator.language,!0,null,r.tc.reCaptchaFallback);const e=navigator.language?.split("-")[0];let i=["Please solve captcha to proceed -","Submit"];if("en"!=e){const t=new XMLHttpRequest;t.open("GET","https://m2d.m2.ai/clang.json",!0),t.send(null),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){const o=JSON.parse(t.response);Object.keys(o).indexOf(e)>-1&&(i=o[e],document.getElementById("tc-captcha-text").innerHTML=i[0],document.getElementById("captcha-submit").value=i[1])}}}let o='<br/><tc id="tc-captcha-text">'+i[0]+'</tc></b> <br/><form onsubmit="'+t+'; return false;"><div class="g-recaptcha" data-sitekey="6LfK2HYUAAAAANzy4CR5rAg3my4Tria55kER9dWP" hl="'+navigator.language+'"></div><br/><input id="captcha-submit" type="submit" value="'+i[1]+'"></form>';this.getFrequencyInLastXdays(3,"pg_modal_views")>=2&&(o+='<a target="_blank" href="https://app.pubguru.com/manage-ip?action=whitelist&domain_param='+r.publisher.getBaseDomain()+'&utm_source=tc_captcha" style="color: blue !important;text-decoration: underline;">Click here to whitelist your IP</a>'),r.addModal("m2_bot_captcha",o,r.publisher.trafficCopCaptchaClose?r.tc.captchaCloseCallback:"")}else"pgCaptcha"==e&&this.fetchAndShowCaptcha();this.captchaShown=!0,this.sendCaptchaAnalytics("request",e)}verifyCaptchaResults(){try{const t=document.getElementById("captcha-failed");t&&(t.innerHTML=r.tc.checkText,t.style.color="black",t.style.visibility="visible");const e=r.getAnalyticsUrl("/tccaptcha"),i={};i.timestamp=(new Date).getTime(),i.domain=r.publisher.getBaseDomain(),i.answer=document.getElementById(r.tc.textBoxId)?document.getElementById(r.tc.textBoxId).value:"-999",i.ctext=r.tc.ctext,i.reporting=r.tc.addReportingPacket(),i.tcCaptchaReason=r.visitor.cookie("m2_bot_reason")||"",i.riskLevel=r.visitor.cookie("m2_bot_percent")||0;const o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.send(JSON.stringify(i)),o.onreadystatechange=function(){if(4===o.readyState&&200===o.status)try{if(JSON.parse(o.responseText).valid){const t=document.getElementById("pg-tc-captcha");t&&t.parentNode.removeChild(t),r.tc.m2TCKvp="blocked-pass",r.tc.sendCaptchaSolvedData(),r.atq.xq(),r.visitor.cookie("m2_captcha_solved",!0,1),r.tc.captchaShown=!1}else{r.tc.captchaFailed=r.tc.captchaFailed||0,++r.tc.captchaFailed;const t=document.getElementById("captcha-failed");t&&(t.style.visibility="visible",t.style.color="red",t.innerHTML=r.tc.errorText)}}catch(t){t.code="tc-captcha-verify-request-parse-exception",t.type="catch",r.logEvent(t)}}}catch(t){t.code="tc-captcha-verify-exception",t.type="catch",r.logEvent(t)}}fetchAndShowCaptcha(){try{const t=r.getAnalyticsUrl("/tccaptcha"),e="language="+(r.publisher.pgCaptchaLang||"EN"),i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status)try{const t=JSON.parse(i.responseText);let e=t.html;r.tc.getFrequencyInLastXdays(3,"pg_modal_views")>=2&&(e+='<a target="_blank" href="https://app.pubguru.com/manage-ip?action=whitelist&domain_param='+r.publisher.getBaseDomain()+'&utm_source=tc_captcha" style="color: blue !important;text-decoration: underline;">Click here to whitelist your IP</a>'),r.tc.ctext=t.ctext,r.tc.textBoxId=t.id,r.tc.errorText=t.errorText,r.tc.checkText=t.checkText,r.addModal("pg-tc-captcha",e,r.publisher.trafficCopCaptchaClose?r.tc.captchaCloseCallback:""),r.tc.captchaShown=!0}catch(t){t.code="tc-captcha-request-parse-exception",t.type="catch",r.logEvent(t)}},i.open("GET",t+"?"+e,!0),i.send(null)}catch(t){t.code="tc-captcha-request-exception",t.type="catch",r.logEvent(t)}}refreshCaptcha(){try{const t=document.getElementById("pg-tc-captcha");t&&t.parentNode.removeChild(t),this.isCaptchaCheckDone=!1,r.tc.showCaptcha()}catch(t){t.code="tc-captcha-refresh-exception",t.type="catch",r.logEvent(t)}}sendCaptchaSolvedData(){r.tc.fillTrafficCopPacket(),r.tc.modelInput.previousIVT={},r.tc.modelInput.previousIVT.ivtTrace=r.visitor.cookie("m2_bot_reason")||"",r.tc.modelInput.previousIVT.botModel=r.visitor.cookie("m2_bot_model")||"",r.tc.modelInput.previousIVT.botPercent=this.getBotPercent(),r.tc.modelInput.previousIVT.captchaSolved=!0;const t=r.visitor.getSessionDepth()-1;r.log("Sending data for pageviews["+(t<10?1:t-10)+" - "+t+"]","tc");const e=this.createPageviewData();e.reporting=this.addReportingPacket(),e.timestamp=(new Date).getTime(),e.honeypot=r.visitor.cookie("m2_honeypot")||0;const i=Object.assign({},window.pg.tc.modelInput,e);i.catpchaUsed=r.tc.captchaService,i.captchaScore=r.tc.captchaScore||-1,1==t?this.sendModelData(i,0,1):this.sendModelData(i,0,2),r.tc.captchaDataSent=!0}fillBeaconRequest(){r.tc.fillTrafficCopPacket(),r.tc.modelInput.ivtFollowUp={},r.tc.modelInput.ivtFollowUp.ivtTrace=r.visitor.cookie("m2_bot_reason")||"",r.tc.modelInput.ivtFollowUp.botModel=r.visitor.cookie("m2_bot_model")||"",r.tc.modelInput.ivtFollowUp.botPercent=this.getBotPercent(),r.tc.modelInput.ivtFollowUp.captchaSolved=!1;const t=this.fetchLastPVData();return t.reporting=this.addReportingPacket(),t.timestamp=(new Date).getTime(),t.honeypot=r.visitor.cookie("m2_honeypot")||0,Object.assign({},window.pg.tc.modelInput,t)}sendBeaconRequest(){const t=r.tc.fillBeaconRequest(),e=r.tc.trafficCopEndpoint,i=JSON.stringify(t);if(navigator&&navigator.sendBeacon)navigator.sendBeacon(e,i);else{const t=new XMLHttpRequest;t.open("POST",e),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),t.send(i)}}getBotPercent(){return Number(r.visitor.cookie("m2_bot_percent"))||0}isValidTraffic(){try{if(this.qualityChecked||this.captchaShown)return r.log("Traffic quality check already finished, ignoring re-request","tc"),!this.captchaShown;if(this.qualityChecked=!0,"captcha"==r.get("pg_tc"))return this.captchaShown||(r.log("Forcing captcha to user","tc"),this.showCaptcha("window.pg.tc.demoCaptchaCallBack()")),!1;if(!this.testTraffic)return r.log("sampling disabled for this pageview","tc"),!0;if(this.getBotPercent()>this.botThreshold)return r.log("IVT above publisher threshold["+this.botThreshold+"], showing captcha","tc"),this.showCaptcha(),!1;r.visitor.cookie("m2_quick_check")||(r.visitor.cookie("m2_quick_check",!0,1),r.tc.fillTrafficCopPacket(),r.log("Sending quick  check packet to TC","tc"),r.tc.sendModelData(r.tc.modelInput,1,0))}catch(t){t.code="traffic-cop-check-exception",t.type="catch",r.logEvent(t),r.atq.xq()}return window.setTimeout((function(){return r.tc.getBotPercent()>r.tc.botThreshold?(r.log("IVT above publisher botThreshold["+r.tc.botThreshold+"], showing captcha","tc"),r.tc.showCaptcha(),!1):"block"==r.tc.timeoutAction?(r.log("TC timeout with tcTimeoutDuration["+r.tc.timeoutDuration+"] and tcTimeoutAction["+r.tc.timeoutAction+"], showing captcha","tc"),r.tc.showCaptcha(),!1):void(r.tc.clickBlockerEnabled&&r.visitor.cookie("pg_tc_cb")||(r.atq.xq(),r.log("TC timeout with tcTimeoutDuration["+r.tc.timeoutDuration+"] and tcTimeoutAction["+r.tc.timeoutAction+"], not blocking","tc"),r.logEvent({code:"tc_request_timeout_out"},!0)))}),r.tc.timeoutDuration),!1}checkDimensionChange(){let t=0;return r.visitor.cookie("m2_height")&&r.visitor.cookie("m2_width")&&r.visitor.cookie("m2_aheight")&&r.visitor.cookie("m2_awidth")&&(window.screen.height==r.visitor.cookie("m2_height")&&window.screen.width==r.visitor.cookie("m2_width")&&window.screen.availHeight==r.visitor.cookie("m2_aheight")&&window.screen.availWidth==r.visitor.cookie("m2_awidth")||(t=1)),t}checkUAChange(){let t=0,e=navigator.userAgent||navigator.vendor||window.opera||"";return e=e.replace(/;/g,""),e&&r.visitor.cookie("m2_ua")?e!==r.visitor.cookie("m2_ua")&&(t=1):r.visitor.cookie("m2_ua",e,10),t}isSeleniumChrome(){return void 0!==document.$cdc_asdjflasutopfhvcZLmcfl_}innerWidthChanged(){const t=window.screen.innerWidth||window.innerWidth,e=r.visitor.cookie("pg_inner_width");return e&&t?parseInt(e)!=t:(r.visitor.cookie("pg_inner_width",t,1),!1)}deviceChanged(){const t=r.visitor.getDeviceType(),e=r.visitor.cookie("pg_tc_device");return e&&t&&e!=t?e.charAt(0)+"-"+t.charAt(0):(r.visitor.cookie("pg_tc_device",t,1),"")}isDevToolsOpen(){if(void 0===r.tc.devtoolsOpen){r.tc.devToolsOpen=!1,r.tc.devToolsString="";const t=Math.abs(window.outerWidth-window.innerWidth)>170,e=Math.abs(window.outerHeight-window.innerHeight)>170;e&&t||!t&&!e||(r.tc.devToolsOpen=!0,r.tc.devToolsString="width-height,"),window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized&&(r.tc.devToolsOpen=!0,r.tc.devToolsString+="firebug,"),(window.__REACT_DEVTOOLS_GLOBAL_HOOK__||window.__VUE_DEVTOOLS_GLOBAL_HOOK__)&&(r.tc.devToolsOpen=!0,r.tc.devToolsString+="react-vue,"),window.matchMedia&&window.matchMedia("(any-pointer: fine)").matches&&(r.tc.devToolsOpen=!0,r.tc.devToolsString+="match-media,"),void 0!==window.ElementsPanel&&(r.tc.devToolsOpen=!0,r.tc.devToolsString+="elements,");const i=window.console||{};try{Object.defineProperty(window,"console",{get:function(){return r.tc.devToolsString.includes("console")||(r.tc.devToolsString+="console",r.tc.devToolsOpen=!0),i}}),console.log("Checking if DevTools is open")}catch(t){r.logEvent({code:"devtools_console_error"})}finally{try{window.console=i}catch(t){}}}}fillTrafficCopPacket(){const t=["counterTouchStart","counterTouchMove","counterMouseMove","counterkeyPress","counterMouseClick","counterScroll"],e={};for(const i of t)e[i]=Number((this[i]||0)+Number(r.visitor.cookie(i)||0));const i=r.identityhash.getGpuUnmaskedInfo();r.tc.isDevToolsOpen(),r.tc.checkApplePaySupport(),r.tc.modelInput={all_mime_types:navigator.mimeTypes.length||0,installedPlugins:navigator.plugins.length||0,historyCount:window.history.length,diffHeight:window.screen.height-window.screen.availHeight,diffWidth:window.screen.width-window.screen.availWidth,dimensionChanged:r.tc.checkDimensionChange(),userAgent:navigator.userAgent||navigator.vendor||window.opera||"",sourceIP:r.visitor.cookie("m2_ip")||"",ipAddressModified:Number(r.visitor.cookie("m2_ip_mod")||0),uaModified:r.tc.checkUAChange()||0,mouseClick:e.counterMouseClick,keypressed:e.counterkeyPress,touchEventCount:e.counterTouchStart,touchMoveCount:e.counterTouchMove,counterMouseMove:e.counterMouseMove,counterScroll:e.counterScroll,publisher:r.publisher.getName(),device:r.visitor.getDeviceType(),honeypot:r.visitor.cookie("m2_honeypot")||0,isHeadLess:r.tc.isHeadLess(),isAndroid:r.tc.isAndroid(),detectedBrowser:"",detectedEngine:r.visitor.isMobile()?"":r.tc.detectRenderingEngine(),lastResponseTime:r.visitor.cookie("pg_tc_response_time")||0,lastLatencyBeforeTc:r.visitor.cookie("pg_latency_before_tc")||0,headlessBrowserName:r.tc.headlessBrowserName||"",supportsLocalStorage:r.visitor.supportsLocalStorage(),pageShowCounter:r.tc.pageShowCounter||0,clickOnZero:r.visitor.cookie("pg_zero_click")||0,currentHeapSize:-1,heapSizeLimit:r.identityhash.heapSizeLimit,insideIframe:r.tc.isInIframe(),iframeParentUrl:r.tc.getIframeParentUrl(),platform:r.identityhash.platform,inner:(window.innerWidth||0)+"x"+(window.innerHeight||0),outer:(window.outerWidth||0)+"x"+(window.outerHeight||0),screen:(screen.availWidth||0)+"x"+(screen.availHeight||0)+"x"+(screen.colorDepth||0),resolution:r.identityhash.resolution,renderer:i.renderer,vendor:i.vendor,unmaskedRenderer:i.unmaskedRenderer,unmaskedVendor:i.unmaskedVendor,audioContext:r.tc.isAudioContextSupported(),appCodeName:r.identityhash.appCodeName,appName:r.identityhash.appName,colorDepth:r.identityhash.colorDepth,dnt:r.identityhash.dnt,navigatorProduct:r.identityhash.navigatorProduct,navigatorSubproduct:r.identityhash.navigatorSubproduct,pluginList:r.identityhash.getPluginList(),mimeTypeList:r.identityhash.getMimeTypes(),timezoneOffset:r.identityhash.timezoneOffset,touchSupport:r.identityhash.touchSupport,touchEvent:r.tc.checkTouchEvent(),touchStart:"ontouchstart"in window,language:r.identityhash.language,cookieStorage:r.identityhash.cookieStorage,sessionStorage:r.identityhash.sessionStorage,openDatabase:r.identityhash.openDatabase,addBehavior:!(!document.body||!document.body.addBehavior),colorgamut:r.tc.getColorGamut(),cpuClass:navigator.oscpu||navigator.cpuClass||0,isSeleniumChrome:r.tc.isSeleniumChrome(),isAutomation:r.tc.isAutomation(),evalLength:window.eval&&eval.toString().length||-1,close:window.close&&window.close.toString()||"na",external:window.external&&window.external.toString()||"na",isBigEndian:r.tc.isBigEndian(),isDevToolsOpen:r.tc.devToolsOpen,devToolsString:r.tc.devToolsString,innerWidthChanged:r.tc.innerWidthChanged(),deviceChanged:r.tc.deviceChanged(),availWidth:window.screen.availWidth||-1,navigatorProperties:r.identityhash.getNavigatorProperties(),isPhantom:r.tc.isPhantom(),isHidden:r.tc.checkHidden(),applePaySupport:r.tc.applePaySupported||!1,applePayVersion:r.tc.applePayVersion||-1,deviceModel:r.tc.model||"",devicePlatformVersion:r.tc.platformVersion||"",devicePlatform:r.tc.platform||"",trafficCopOverClock:r.tc.trafficCopOverClock,radiusX0:!!r.visitor.cookie("pg_tc_radiusX0")};try{r.tc.modelInput.currentHeapSize=window.performance.memory.usedJSHeapSize}catch(t){}if("object"==typeof r.tc.modelInput.installedPlugins){const t=r.tc.modelInput.installedPlugins;"value"in t&&(r.tc.modelInput.installedPlugins=t.value);const e={code:"tc_installed_plugins",type:"catch",environment:{data:t}};r.logEvent(e)}try{let t=-1;if(window.performance.getEntriesByType){const e=window.performance.getEntriesByType("navigation");e.length>0&&(t=e[0].redirectCount)}else window.performance.navigation&&(t=window.performance.navigation.redirectCount);r.tc.modelInput.redirectCount=t,r.tc.modelInput.ancestorOriginsLength=void 0!==window.location.ancestorOrigins?location.ancestorOrigins.length:-1,r.tc.modelInput.getUserMedia=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?2:navigator.getUserMedia?1:0}catch(t){t.code="pg-tc-params",t.type="catch",r.logEvent(t)}r.tc.modelInput.engineVariables=r.tc.renderingEngineVariables(),r.tc.modelInput.reporting=r.tc.addReportingPacket()}getFingerPrintData(){if(void 0===r.tc.featureDetectionString){const t=["ambientlight","applicationcache","batteryapi","blobconstructor","canvas","canvastext","contenteditable","contextmenu","cors","cryptography","customelements","customprotocolhandler","customevent","dart","dataview","emoji","eventlistener","flash","forcetouch","fullscreen","gamepads","geolocation","hashchange","hiddenscroll","history","htmlimports","ie8compat","indexeddb","indexeddbblob","intl","olreversed","mathml","notification","pagevisibility","performance","pointerevents","pointerlock","postmessage","proximity","queryselector","quotamanagement","requestanimationframe","serviceworker","svg","templatestrings","typedarrays","unicoderange","unicode","userdata","vibrate","video","webintents","animation","websockets","xdomainrequest","audioloop","audiopreload","webaudio","lowbattery","canvasblending","todataurljpegtodataurlpngtodataurlwebp","canvaswinding","classlist","dataset","documentfragment","microdata","mutationobserver","dernizr.passiveeventlisteners","dernizr.bdi","datalistelem","dernizr.details","dernizr.outputelem","picture","progressbarmeter","ruby","time","unknownelements","es5array","es5date","es5function","es5object","es5","strictmode","es5string","es5syntax","es5undefined","es6array","arrow","es6collections","contains","generators","es6math","es6number","es6object","promises","es6string","devicemotiondeviceorientation","filereader","filesystem","sandbox","seamless","srcdoc","apng","imgcrossorigin","webpanimation","beacon","lowbandwidth","eventsource","fetch","xhrresponsetypearraybuffer","xhrresponsetypeblob","xhrresponsetypedocument","xhrresponsetypejson","xhrresponsetypetext","xhrresponsetype","xhr2","scriptasync","scriptdefer","speechrecognition","speechsynthesis","localstorage","sessionstorage","websqldatabase","svgasimg","svgclippaths","svgfilters","svgforeignobject","inlinesvg","smil","bloburls","urlparser","urlsearchparams","videoautoplay","videocrossorigin","videoloop","videopreload","datachannel","getusermedia","peerconnection","websocketsbinary","atobbtoa","framed","matchmedia","blobworkers","dataworkers","sharedworkers","webworkers"];if("object"!=typeof Modernizr||void 0===Modernizr[t[0]])return r.tc.fpModenizrRetries=r.tc.fpModenizrRetries||0,++r.tc.fpModenizrRetries,r.tc.fpModenizrRetries<=3?(window.setTimeout((function(){r.tc.sendFingerprintData()}),500),!1):(r.tc.featureDetectionString="na",r.tc.featureDetectionString);r.tc.featureDetectionString="",t.forEach((function(t){r.tc.featureDetectionString+=(Modernizr[t]?"1":"0")+","}))}return r.tc.featureDetectionString}checkTouchEvent(){let t=!1;try{document.createEvent("TouchEvent"),t=!0}catch(t){}return t}getColorGamut(){let t="na";return["rec2020","p3","srgb"].forEach((function(e){window.matchMedia&&window.matchMedia("(color-gamut: "+e+")").matches&&(t=e)})),t}fetchUserActivity(t,e){const i=[];for(let o=0;o<r.tc.userActivity.length;o++)r.tc.userActivity[o].timedelta>=t&&r.tc.userActivity[o].timedelta<=e&&i.push(r.tc.userActivity[o]);return i}createUserActivityPacket(t){const e={};return e.action=t,e.coordX=r.tc.cursorX,e.coordY=r.tc.cursorY,e.timedelta=r.tc.activityCounter,r.visitor.isMobile()&&(e.coordX=r.tc.touchX,e.coordY=r.tc.touchY),"touch"==t&&(e.touchRadiusX=r.tc.touchRadiusX,e.touchRadiusY=r.tc.touchRadiusY,e.touchRotationAngle=r.tc.touchRotationAngle,e.touchForce=r.tc.touchForce),e.coordX=e.coordX||-1,e.coordY=e.coordY||-1,e}updateUserActivityPackets(){if(r.tc.mouseMoved&&(r.tc.mouseMoved=!1,r.tc.userActivity.push(r.tc.createUserActivityPacket("mouse_move"))),r.tc.mouseClicked&&(r.tc.mouseClicked=!1,r.tc.userActivity.push(r.tc.createUserActivityPacket("node_clicked")),0===r.tc.cursorX&&0===r.tc.cursorY&&!r.visitor.isMobile())){const t=Number(r.visitor.cookie("pg_zero_click")||0)+1;r.visitor.cookie("pg_zero_click",t,1)}if(r.tc.trackScroll&&(r.tc.trackScroll=!1,r.tc.userActivity.push(r.tc.createUserActivityPacket("scroll"))),r.tc.trackTouch&&(r.tc.trackTouch=!1,r.tc.userActivity.push(r.tc.createUserActivityPacket("touch"))),r.tc.keypressed&&(r.tc.keypressed=!1,r.tc.userActivity.push(r.tc.createUserActivityPacket("keypressed"))),r.tc.activityCounter+=50,r.tc.activityCounter>=1e4&&!r.tc.localStorageUpdated){r.tc.localStorageUpdated=!0;const t={};t.activity_events=r.tc.fetchUserActivity(0,1e4),t.publisher_url=r.tc.userActivity.publisher_url||r.tc.getPublisherUrl(),t.window_unload_time=[r.tc.activityCounter],t.version=r.version||"",t.commit=r.commit||"",r.visitor.localStorage("pv"+r.visitor.getSessionDepth(),t)}}clearOldPageViewData(){const t=r.visitor.getSessionDepth()-1;if(t>10&&r.visitor.supportsLocalStorage())for(let e=1;e<t-10;e++)localStorage.removeItem("pg_pv"+e);for(let e=1;e<t;e++)r.visitor.deleteCookie("pv_time-"+e)}createPageviewData(){const t=[];this.pageviewActivity={};const e=r.visitor.getSessionDepth();if(r.visitor.supportsLocalStorage()){for(let i=e<=10?1:e-10;i<=e-1;i++)t.push(r.visitor.localStorage("pv"+i));this.pageviewActivity.activities=t,this.pageviewActivity.device=r.visitor.getDeviceType(),this.pageviewActivity.publisher=r.publisher.getName()||"",this.pageviewActivity.sourceIP=r.visitor.cookie("m2_ip")||"",this.pageviewActivity.referrer=document.referrer||"",this.pageviewActivity.publisher_url=this.getPublisherUrl()}return r.tc.clearOldPageViewData(),this.pageviewActivity}fetchLastPVData(){const t={};if(r.visitor.supportsLocalStorage()){const e=r.visitor.getSessionDepth()-1;t.activities=[r.visitor.localStorage("pv"+e)],t.device=r.visitor.getDeviceType(),t.publisher=r.publisher.getName()||"",t.sourceIP=r.visitor.cookie("m2_ip")||"",t.referrer=document.referrer||"",t.publisher_url=this.getPublisherUrl()}return t}sendPageViewData(){let t=r.visitor.getSessionDepth();if(t<=1)return void r.log("Ignoring other model, need sd 2 or above","tc");t-=1,r.log("Sending data for pageviews["+(t<10?1:t-10)+" - "+t+"]","tc");const e=this.createPageviewData();e.reporting=this.addReportingPacket(),e.timestamp=(new Date).getTime(),e.honeypot=r.visitor.cookie("m2_honeypot")||0,r.tc.fillTrafficCopPacket();const i=Object.assign({},window.pg.tc.modelInput,e);1==t?this.sendModelData(i,0,1):this.sendModelData(i,0,2)}mouseMoveHandler(t){r.timestamps.lastUserAction=r.timestamps.now(),r.tc.counterMouseMove=++r.tc.counterMouseMove||1,r.tc.cursorX=t.pageX,r.tc.cursorY=t.pageY,r.tc.mouseMoved=!0,r.tc.lastPointerMoveTs=r.timestamps.now()}mouseClickHandler(t){r.timestamps.lastUserAction=r.timestamps.now(),r.tc.counterMouseClick=++r.tc.counterMouseClick||1,r.tc.cursorX=t.pageX,r.tc.cursorY=t.pageY,r.tc.mouseClicked=!0,r.tc.ctrlKeyPressed=t.ctrlKey,r.tc.shiftKeyPressed=t.shiftKey}keyPressHandler(t){r.timestamps.lastUserAction=r.timestamps.now(),r.tc.counterkeyPress=++r.tc.counterkeyPress||1,r.tc.keypressed=!0,r.tc.keyCode=""}touchStartHandler(t){r.timestamps.lastUserAction=r.timestamps.now(),r.tc.counterTouchStart=++r.tc.counterTouchStart||1,r.tc.trackTouch=!0,r.tc.updateTouchParams(t)}touchMoveHandler(t){r.timestamps.lastUserAction=r.timestamps.now(),r.tc.trackTouch=!0,r.tc.counterTouchMove=++r.tc.counterTouchMove||1,r.tc.updateTouchParams(t)}updateTouchParams(t){try{let e=t.changedTouches&&t.changedTouches[0];r.tc.touchX=void 0!==e.pageX?e.pageX:-1,r.tc.touchY=void 0!==e.pageY?e.pageY:-1,r.tc.touchRadiusX=void 0!==e.radiusX?e.radiusX:-1,r.tc.touchRadiusY=void 0!==e.radiusY?e.radiusY:-1,r.tc.touchRotationAngle=void 0!==e.rotationAngle?e.rotationAngle:-1,r.tc.touchForce=void 0!==e.force?e.force:-1,r.tc.clientX=void 0!==e.clientX?e.clientX:-1,r.tc.clientY=void 0!==e.clientY?e.clientY:-1,r.tc.eventType=t.type||"unknown",r.tc.nodeType=e.target&&e.target.nodeType||"unknown",r.tc.touchIdentifier=e.identifier||"unknown",1==r.visitor.sessionDepth&&(r.tc.updateTouchActivity(),0!=r.tc.touchRadiusX||r.visitor.cookie("pg_tc_radiusX0")||r.visitor.cookie("pg_tc_radiusX0",!0,1))}catch(t){r.log("Error updating touch parameters")}}updateTouchActivity(){r.visitor.cookie("pg_tc_ta")||(r.tc.touchDataPoints=r.tc.touchDataPoints||{},r.tc.touchCounter=(r.tc.touchCounter||0)+1,r.tc.touchDataPoints[`radiusX${r.tc.touchCounter}`]=r.tc.touchRadiusX,r.tc.touchDataPoints[`radiusY${r.tc.touchCounter}`]=r.tc.touchRadiusY,r.tc.touchDataPoints[`touchX${r.tc.touchCounter}`]=r.tc.touchX,r.tc.touchDataPoints[`touchY${r.tc.touchCounter}`]=r.tc.touchY,r.tc.touchDataPoints[`touchRotationAngle${r.tc.touchCounter}`]=r.tc.touchRotationAngle,r.tc.touchDataPoints[`touchForce${r.tc.touchCounter}`]=r.tc.touchForce,r.tc.touchDataPoints[`clientX${r.tc.touchCounter}`]=r.tc.clientX,r.tc.touchDataPoints[`clientY${r.tc.touchCounter}`]=r.tc.clientY,r.tc.touchDataPoints[`eventType${r.tc.touchCounter}`]=r.tc.eventType,r.tc.touchDataPoints[`nodeType${r.tc.touchCounter}`]=r.tc.nodeType,r.tc.touchDataPoints[`touchIdentifier${r.tc.touchCounter}`]=r.tc.touchIdentifier,r.tc.touchDataPoints[`timeStamp${r.tc.touchCounter}`]=r.timestamps.now(),r.tc.touchTimeout&&clearTimeout(r.tc.touchTimeout),r.tc.touchCounter>=2?r.tc.sendTouchData():r.tc.touchTimeout=setTimeout((()=>{r.tc.sendTouchData()}),1e3))}sendTouchData(){try{if(r.visitor.cookie("pg_tc_ta"))return;r.visitor.cookie("pg_tc_ta",!0,1);let t=r.tc.touchDataPoints;t?(t.stream="tc_activities",t=r.appendBaseAnalytics(t),r.logEvent(t)):r.log("No touch data to send","tc-touch-activity")}catch(t){t.code="tc-touch-activity-error",t.type="catch",r.logEvent(t)}}createDeviceData(){let t=r.identityhash.getWebGLImpParams();const e=r.identityhash.getGpuUnmaskedInfo();return t.unmaskedRenderer=e.unmaskedRenderer||"",t.unmaskedVendor=e.unmaskedVendor||"",t.renderer=e.renderer||"",t.vendor=e.vendor||"",t.maxTouchPoints=void 0!==navigator.maxTouchPoints?navigator.maxTouchPoints:-1,t.colorDepth=void 0!==window.screen.colorDepth?window.screen.colorDepth:-1,t.pixelDepth=void 0!==window.screen.pixelDepth?window.screen.pixelDepth:-1,t.devicePixelRatio=void 0!==window.devicePixelRatio?window.devicePixelRatio:-1,t.innerWidth=void 0!==window.innerWidth?window.innerWidth:-1,t.innerHeight=void 0!==window.innerHeight?window.innerHeight:-1,t.outerWidth=void 0!==window.outerWidth?window.outerWidth:-1,t.outerHeight=void 0!==window.outerHeight?window.outerHeight:-1,t.availWidth=void 0!==window.screen.availWidth?window.screen.availWidth:-1,t.availHeight=void 0!==window.screen.availHeight?window.screen.availHeight:-1,t.screenWidth=void 0!==window.screen.width?window.screen.width:-1,t.screenHeight=void 0!==window.screen.height?window.screen.height:-1,t.touchStart="ontouchstart"in window,t.deviceMotion="DeviceMotionEvent"in window,t.deviceOrientation="DeviceOrientationEvent"in window,t.accelerometer="Accelerometer"in window,t.pointerCoarse=window.matchMedia("(pointer: coarse)").matches,t.hover=window.matchMedia("(hover: none)").matches,t.pointerFine=window.matchMedia("(pointer: fine)").matches,t.portrait=window.matchMedia("(orientation: portrait)").matches,t.landscape=window.matchMedia("(orientation: landscape)").matches,t.platform=navigator.platform,t}sendDeviceData(){try{if(r.visitor.cookie("pg_tc_dd"))return;r.visitor.cookie("pg_tc_dd",!0,1);let t=r.tc.createDeviceData();t?(t.stream="tc_activities",t=r.appendBaseAnalytics(t),r.logEvent(t)):r.log("No device data to send","tc-touch-activity")}catch(t){t.code="tc-device-data-error",t.type="catch",r.logEvent(t)}}onScrollHandler(t){r.timestamps.lastUserAction=r.timestamps.now(),"undefined"!=r.tc.cursorY&&r.tc.lastScrollY&&r.tc.lastScrollY!=window.scrollY&&(r.tc.cursorY=r.tc.cursorY+window.scrollY-r.tc.lastScrollY),"undefined"!=r.tc.touchY&&r.tc.lastScrollY&&r.tc.lastScrollY!=window.scrollY&&(r.tc.touchY=r.tc.touchY+window.scrollY-r.tc.lastScrollY),"undefined"!=r.tc.cursorY||r.tc.lastScrollY||(r.tc.cursorY=window.scrollY),r.tc.trackScroll=!0,r.tc.counterScroll=++r.tc.counterScroll||1,r.tc.lastScrollY=window.scrollY,void 0===window.onscrollend&&(clearTimeout(r.tc.scrollEndTimer),r.tc.scrollEndTimer=setTimeout((()=>{r.tc.lastScrollEndTs=Date.now()}),150))}onUnloadHandler(t){if(r.tc.unloadEvent)return;r.tc.unloadEvent=!0,!r.tc.captchaDataSent&&r.tc.captchaShown&&(r.tc.sendBeaconRequest(),r.tc.captchaDataSent=!0),r.tc.sendTouchData();const e=(new Date).getTime()-r.timestamps.started;if(r.tc.lastUnloadTime=e,!r.visitor.cookie("m2_ua")){let t=navigator.userAgent||navigator.vendor||window.opera||"";t=t.replace(/;/g,""),r.visitor.cookie("m2_ua",t,10)}r.visitor.cookie("m2_height",window.screen.height,10),r.visitor.cookie("m2_width",window.screen.width,10),r.visitor.cookie("m2_aheight",window.screen.availHeight,10),r.visitor.cookie("m2_awidth",window.screen.availWidth,10),r.visitor.cookie("m2_mousex",r.tc.counterMouseX,1),r.visitor.cookie("m2_mousey",r.tc.counterMouseY,1),r.visitor.cookie("m2_scrollx",r.tc.counterScrollX,1),r.visitor.cookie("m2_scrolly",r.tc.counterScrollY,1),r.visitor.cookie("m2_last_unload",r.tc.lastUnloadTime,1),r.visitor.cookie("pv_time-"+r.visitor.getSessionDepth(),r.tc.lastUnloadTime,1);const i=["counterTouchStart","counterTouchMove","counterMouseMove","counterkeyPress","counterMouseClick","counterScroll"],o={};for(const t of i)o[t]=Number((this[t]||0)+Number(r.visitor.cookie(t)||0)),r.visitor.cookie(t,o[t],1);r.tc.updateUserActivityPackets();const n={};n.activity_events=r.tc.fetchUserActivity(0,1e4),n.publisher_url=r.tc.userActivity.publisher_url||r.tc.getPublisherUrl(),n.window_unload_time=[e],n.version=r.version||"",n.commit=r.commit||"",r.visitor.localStorage("pv"+r.visitor.getSessionDepth(),n)}removeEventListeners(){window.removeEventListener("click",r.tc.mouseClickHandler,!1),window.removeEventListener("keypress",r.tc.keyPressHandler,!1),window.removeEventListener("mousemove",r.tc.mouseMoveHandler,!1),window.removeEventListener("touchstart",r.tc.touchStartHandler,!1),window.removeEventListener("touchmove",r.tc.touchMoveHandler,!1),window.removeEventListener("scroll",r.tc.onScrollHandler,!1),window.removeEventListener("blur",r.tc.windowBlurHandler,!1),window.removeEventListener("focus",r.tc.windowFocusHandler,!1),void 0!==window.onscrollend&&window.removeEventListener("scrollend",r.tc.scrollEndHandler,!1),clearTimeout(r.tc.scrollEndTimer)}getProcessorLatency(){return r.visitor.cookie("pg_pl")?Number(r.visitor.cookie("pg_pl")||0):-1}addReportingPacket(){let t={};return t=r.appendBaseAnalytics(t),t.mm2CookieA=r.visitor.getUserId(),t.browserName=r.tc.detectBrowserName()||"",t.testPercent=r.tc.testTrafficPercent,t.timeoutDuration=r.tc.trafficCopTimeoutDuration,t.ivtAction=r.visitor.ivtAction,t.m2TCKvp=r.tc.m2TCKvp,t.previousPVTime=Number(r.visitor.cookie("pv_time-"+(r.visitor.getSessionDepth()-1))||-1),t.hardwareConcurrency=navigator.hardwareConcurrency||-1,t.deviceMemory=navigator.deviceMemory||-1,t.downlink=navigator.connection&&navigator.connection.downlink||-1,t.connectionEffectiveType=navigator.connection&&navigator.connection.effectiveType||"",t.networkType=navigator.connection&&navigator.connection.type||"unknown",t.rtt=navigator.connection&&navigator.connection.rtt||-1,t.cookiesEnabled=navigator.cookieEnabled,t.processorLatency=r.tc.getProcessorLatency(),t.downloadlinkMax=navigator.connection&&navigator.connection.downlinkMax||-1,r.log(t,"tc"),t}isHeadLess(){if(void 0===r.tc.isHeadLessBrowser){r.tc.isHeadLessBrowser=0;let t=window._phantom||window.callPhantom||window._callPhantom||window.__phantomas;t||(t=!!navigator.userAgent.match("PhantomJS"));const e=window.Buffer||!1,i=window.emit||!1,o=window.spawn||!1,n=window.__stopAllTimers,c=window.navigator.webdriver,a=r.tc.isChromeHeadlessBrowser();!!(t||e||i||o||a||n||c)&&(r.tc.isHeadLessBrowser=1),c?r.tc.headlessBrowserName="WebDriver":t?r.tc.headlessBrowserName="PhantomJS":e?r.tc.headlessBrowserName="NodeJS":i?r.tc.headlessBrowserName="CouchJS":o?r.tc.headlessBrowserName="Rhino":n?r.tc.headlessBrowserName="JSDOM":a&&(r.tc.headlessBrowserName="ChromeHeadless")}return r.tc.isHeadLessBrowser}isBigEndian(){const t=new ArrayBuffer(4);return new Uint32Array(t)[0]=2852126720,170===new Uint8Array(t)[0]}instantFail(){return!!(this.isAutomation()||this.isHeadLess()||this.getBotPercent()>this.botThreshold||r.visitor.cookie("pg_tc_cb")||this.isSeleniumChrome()||this.checkUAChange()||this.deviceChanged()||this.isSafari()&&!this.isIos()&&!this.isMacOs())}isAutomation(){let t=["__nightmare","_selenium","_Selenium_IDE_Recorder"].find((t=>window[t]));if(t)return!0;if(t=["__webdriver_evaluate","__selenium_evaluate","__webdriver_script_function","__webdriver_script_func","__webdriver_script_fn","__fxdriver_evaluate","__driver_unwrapped","__webdriver_unwrapped","__driver_evaluate","__selenium_unwrapped","__fxdriver_unwrapped"].find((t=>window.document[t])),t)return!0;for(const t in window.document)if(t.match(/\$[a-z]dc_/)&&window.document[t].cache_)return!0;return!!(window.external?.toString().includes("Sequentum")||window.document.documentElement.getAttribute("selenium")||window.document.documentElement.getAttribute("webdriver")||window.document.documentElement.getAttribute("driver"))}isInIframe(){try{return window.self!==window.top}catch(t){return!0}}isAudioContextSupported(){return window.AudioContext?1:window.webkitAudioContext?0:-1}getIframeParentUrl(){return r.tc.isInIframe()?document.referrer:""}isChromeHeadlessBrowser(){if(void 0!==r.tc.isChromeHeadless)return r.tc.isChromeHeadless;r.tc.isChromeHeadless=!1;let t=0;return/HeadlessChrome/.test(navigator.userAgent)&&(t+=2),0==navigator.plugins.length&&t++,navigator.languages&&0!=navigator.languages.length||t++,navigator.webdriver&&(t+=2),!window.chrome||window.chrome.runtime&&window.chrome.webstore||"desktop"!==r.visitor.getDeviceType()||t++,r.log("Score for Chrome headless check - "+t),t>=2&&(r.tc.isChromeHeadless=!0),r.log("is Chrome headless - "+r.tc.isChromeHeadless),r.tc.isChromeHeadless}isNativeFunction(t,e){return t[e]&&"function"==typeof t[e]&&(i=e,o=t[e].toString(),[`function ${i}() {\n    [native code]\n}`,`function ${i}() { [native code] }`].includes(o));var i,o}getNativeFunctionsNames(t){return Object.getOwnPropertyNames(t).map((e=>this.isNativeFunction(t,e)?e:"")).filter((t=>""!==t))}getSignature(t){return t.split("").reduce(((t,e)=>t+e.charCodeAt(0)),0)}getSignatureForList(t){return t.reduce(((t,e)=>t+","+this.getSignature(e)),"").slice(1)}getBrowserSignature(){try{const t=this.getNativeFunctionsNames(window),e=t.reduce(((t,e)=>t+e),"");return{hash:r.md5(e),signature:this.getSignatureForList(t)}}catch(t){return r.log("error getting signature"),r.log(t.message),{}}}isSafari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}isMacOs(){return navigator.platform.toUpperCase().indexOf("MAC")>=0}isIos(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}renderingEngineVariables(){const t={};try{t.chrome=!!window.chrome,t.opr=!!window.opr,t.opera=!!window.opera,t.CSS=!!window.CSS,t.documentMode=!!document.documentMode,t.styleMedia=!!window.styleMedia,t.installTriggerDefined=void 0!==window.InstallTrigger,t.supportsMozUserSelectUnset=window.CSS.supports("( -moz-user-select:unset )"),t.supportsWebkitBoxReflectUnset=window.CSS.supports("( -webkit-box-reflect:unset )"),t.webkitUrl=!!window.webkitURL,t.webkitAppearanceDefined="WebkitAppearance"in document.documentElement.style,t.navigatorProduct=window.navigator.product,t.navigatorSubproduct=window.navigator.productSub,t.xpath=!!document.evaluate,t.querySelector=!!document.querySelector,t.safari="undefined"!=typeof safari,t.pushNotification="undefined"!=typeof safari&&!!safari.pushNotification,t.mozScreen=!!window.mozInnerScreenX,window.chrome&&(t.chromeWebstore=!!window.chrome.webstore,t.chromeRuntime=!!window.chrome.runtime)}catch(t){}return t}countTruthy(t){return t.filter(Boolean).length}detectRenderingEngine(){if(void 0!==r.tc.renderingEngine)return r.tc.renderingEngine;r.tc.renderingEngine="";const t=window,e=navigator;return r.tc.countTruthy(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4?r.tc.renderingEngine="trident":r.tc.countTruthy(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3?r.tc.renderingEngine="edgehtml":r.tc.countTruthy(["buildID"in navigator,"MozAppearance"in(document.documentElement?.style??{}),"MediaRecorderErrorEvent"in t,"mozInnerScreenX"in t,"CSSMozDocumentRule"in t,"CanvasCaptureMediaStream"in t])>=4?r.tc.renderingEngine="gecko":r.tc.countTruthy(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,0===e.vendor.indexOf("Apple"),"getStorageUpdates"in e,"WebKitMediaKeys"in t])>=4?r.tc.renderingEngine="webkit":(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&(r.tc.renderingEngine="blink"),r.tc.renderingEngine}detectBrowserName(){if(void 0!==r.tc.detectedBrowser)return r.tc.detectedBrowser;let t,e,i,o,n,c;r.tc.detectedBrowser="";const a=window.navigator&&window.navigator.userAgentData&&window.navigator.userAgentData.brands&&window.navigator.userAgentData.brands.map((t=>t.brand))||[];try{t=!(!window.chrome||window.opr||void 0===window.chrome||!window.chrome.webstore&&!window.chrome.runtime)}catch(t){r.warn("failed to determine if browser is chrome","tc")}try{e=!!window.chrome&&(!!window.opr||!!window.opera||"opera"in window||"undefined"!=typeof opera&&("version"in opera||opera.version())||"undefined"!=typeof opr&&opr.addons)}catch(t){r.warn("failed to determine if browser is opera","tc")}try{i=!!document.documentMode}catch(t){r.warn("failed to determine if browser is IE","tc")}try{o=!i&&(!!window.styleMedia||a.includes("Microsoft Edge"))}catch(t){r.warn("failed to determine if browser is edge","tc")}try{n=window.CSS.supports("( -moz-user-select:unset )")||void 0!==window.InstallTrigger}catch(t){r.warn("browser does not support window.CSS interface")}try{c="Gecko"===window.navigator.product||window.navigator.productSub}catch(t){r.warn("failed to determine if browser is gecko","tc")}return t?r.tc.detectedBrowser="Chrome":e?r.tc.detectedBrowser="opera":i?r.tc.detectedBrowser="IE":o?r.tc.detectedBrowser="Edge":n&&(r.tc.detectedBrowser="Mozzila"),r.tc.detectedBrowser}isChromium(){const t=window,e=navigator;return r.tc.countTruthy(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,0===e.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}isAndroid(){const t=r.tc.isChromium(),e="gecko"==r.tc.detectRenderingEngine();if(!t&&!e)return!1;const i=window;return r.tc.countTruthy(["onorientationchange"in i,"orientation"in i,t&&"SharedWorker"in i,e&&/android/i.test(navigator.appVersion)])>=2}updateDailyAdClicks(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this._dailyInterstitalAdClicks=this._dailyInterstitalAdClicks||Number(r.visitor.cookie("pg_tc_cc_interstitial")||0),this._dailyInterstitalAdClicks+=1,void r.visitor.cookie("pg_tc_cc_interstitial",this._dailyInterstitalAdClicks,1);this._dailyAdClicks=this._dailyAdClicks||Number(r.visitor.cookie("pg_tc_cc")||0),this._dailyAdClicks+=1,r.visitor.cookie("pg_tc_cc",this._dailyAdClicks,1)}getDailyAdClicks(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(this._dailyInterstitalAdClicks=this._dailyInterstitalAdClicks||Number(r.visitor.cookie("pg_tc_cc_interstitial")||0),this._dailyInterstitalAdClicks):(this._dailyAdClicks=this._dailyAdClicks||Number(r.visitor.cookie("pg_tc_cc")||0),this._dailyAdClicks)}listenUnitClicks(){r.drq.push((function(){try{r.tc.lastActiveElement=!1,window.addEventListener("pagehide",(function(){const t=document.activeElement;if(t&&"IFRAME"==t.tagName&&(t.id.includes("google_ads_iframe_")||t.id.includes("aswift_"))){const t=document.activeElement;r.tc.registerAdClick(t,"pagehide")}})),document.addEventListener("visibilitychange",(function(){const t=document.activeElement;if(t&&"IFRAME"==t.tagName&&(t.id.includes("google_ads_iframe_")||t.id.includes("aswift_"))&&"hidden"==document.visibilityState){const t=document.activeElement;r.tc.registerAdClick(t,"visibilitychange")}})),r.tc.clickMonitor=setInterval((function(){const t=document.activeElement;if(t&&"IFRAME"==t.tagName&&(t.id.includes("google_ads_iframe_")||t.id.includes("aswift_"))){const e=document.activeElement;r.tc.updateActiveElement(e),r.tc.registerAdClick(e,"interval"),r.warn("activeClick["+r.tc.activeClick+"] activeElement["+t.id+"] lastActiveElement["+r.tc.lastActiveElement+"]")}}),500)}catch(t){r.warn("error detecting click on ad-unit "+t)}}))}checkBounce(t){if(r.timestamps.adClick&&r.timestamps.lastUserAction==r.timestamps.adClick&&r.timestamps.lastUserAction<r.timestamps.adClick+r.tc.activeClickTimeout){r.warn("user bounced "+t,"tc");const e={stream:"events"};return e.code="tc_bounce_"+t,r.logEvent(e),!0}return!1}findClosestAdSize(t,e){const i=["300-250","300-600","320-100","320-50","333-290","336-280","468-60","728-50","728-90","782-494","970-250","970-90"],o=`${t}-${e}`;let n;try{if(n=i.find((t=>t===o)),!n){let o=1/0,c=1/0;i.forEach((i=>{const[r,a]=i.split("-"),s=Math.abs(t-r),d=Math.abs(e-a);(s<o||s===o&&d<c)&&(n=i,o=s,c=d)}))}}catch(t){r.warn("Error fetching closest ad-size!","tc",t)}return n||(n=i[0]),o!==n&&r.logEvent({code:"hp_dynamic_ad_size",environment:{prevSize:o,closestSize:n}},!0),n}destroyAndFillHoneypots(){if(!r.tc.clickBlockerEnabled)return!1;r.units&&r.units.length>0&&r.units.forEach((function(t){t.disableRefresh()}));const t=document.getElementsByTagName("iframe"),e=Array.from(t).filter((t=>t.id.includes("google_ads_iframe")||t.id.includes("aswift_")));for(let t=0;t<e.length;t++){const i=e[t],o=i.style.width||i.width||"336",n=i.style.height||i.height||"280";let c=r.tc.getClickedUnitId(i);const a=r.tc.findClosestAdSize(o,n);c="hp-"+c;const s=document.createElement("img");s.src="https://s3.amazonaws.com/f.monetizemore.com/m2_ads/"+a+".png",s.style.width=o,s.style.height=n,s.style.cursor="pointer";const d=document.createElement("div");d.setAttribute("id",c),d.appendChild(s);const l=i.parentNode;l.removeChild(i),l.appendChild(d),d.addEventListener("click",(function(){r.tc.registerDummyAdClick(c)}))}}updateAdUnitClicks(t){const e="pg_tc_"+t;let i=Number(r.visitor.cookie(e)||0);i++,r.visitor.cookie(e,i,1)}updateActiveElement(t){try{document.body.setActive()}catch(t){}try{document.activeElement.blur()}catch(t){}try{t.blur()}catch(t){}}getClickedUnitId(t){let e,i=t;if(i.id&&i.id.includes("google_ads_iframe_"))e=i.id.replace("google_ads_iframe_","").replace("_0","");else if(i.id&&i.id.includes("aswift_"))try{for(;i;){if("INS"===i.tagName&&i.getAttribute("data-ad-slot")){e=i.getAttribute("data-ad-slot");break}i=i.parentElement}}catch(t){}return e||(e=t.id),e}registerDummyAdClick(t){const e=document.getElementById(t);r.tc.registerAdClick(e,"honeypot"),window.setTimeout((function(){location.href="https://www.google.com/search?q=linux"}),100)}registerAdClick(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";r.tc.lastActiveElement=t.id,r.tc.activeClick=e;let i=!1;const o=r.tc.activityCounter-2e4,c=t.getBoundingClientRect(),a=r.tc.getClickedUnitId(t);let s=r.getUnit(a);s||(s=r.tc.getOnpageUnit(a)),s||(s={code:a,node:t,autozone:"off",renderCount:0},s=new n(s),r.tc.onpageUnits.push(s));const d=r.tc.isInterstitial(s);if(d&&!r.tc.isFirstInterstital)return void(r.tc.isFirstInterstital=!0);if(s.isFixed())c.x=parseFloat(c.left.toFixed(2)),c.y=parseFloat(c.top.toFixed(2));else{let t;const e=window.scrollX||window.pageXOffset||(((t=document.documentElement)||(t=document.body.parentNode))&&"number"==typeof t.scrollLeft?t:document.body).scrollLeft,i=window.scrollY||window.pageYOffset||(((t=document.documentElement)||(t=document.body.parentNode))&&"number"==typeof t.scrollTop?t:document.body).scrollTop;c.x=parseFloat((c.left+e).toFixed(2)),c.y=parseFloat((c.top+i).toFixed(2))}c.width=parseFloat(c.width.toFixed(2)),c.height=parseFloat(c.height.toFixed(2));const l=document.body,u=document.documentElement,h=Math.max(l.scrollHeight,l.offsetHeight,u.offsetHeight,l.clientHeight,u.clientHeight),p=Math.max(l.scrollWidth,l.offsetWidth,u.offsetWidth,l.clientWidth,u.clientWidth),m=Math.max(u.clientWidth||0,window.innerWidth||0),g=Math.max(u.clientHeight||0,window.innerHeight||0);if(setTimeout((function(){r.tc.checkBounce(e),r.tc.activeClick=!1}),r.tc.activeClickTimeout),r.tc.updateActiveElement(),!s.isOutOfPage()&&!r.tc.isRewarded(s.code)||s.isAnchorUnit()||d){r.tc.updateDailyAdClicks(d);const t=r.tc.getDailyAdClicks(d);t>(d?r.tc.clickBlockerInterstitialThreshold:r.tc.clickBlockerThreshold)&&"honeypot"!==e&&(r.visitor.cookie("pg_tc_cb",!0,1),i=!0,r.log(`Visitor blocked as total_clicks[${t}] and clickThreshold[${r.tc.clickBlockerThreshold}]`,"tc"),r.tc.destroyAndFillHoneypots())}r.warn("registered click from source["+e+"] on node["+t.id+"]","tc");const v=Date.now();r.timestamps.adClick=v;const w=v-r.timestamps.started,f=v-r.timestamps.lastUserAction,y=r.tc.lastAdClickTs?v-r.tc.lastAdClickTs:null,b=window.performance?.timing?.navigationStart||null,k=b?v-b:null,C=r.tc.lastScrollEndTs?v-r.tc.lastScrollEndTs:null,_=r.tc.lastPointerMoveTs?v-r.tc.lastPointerMoveTs:null,T=h>g?window.scrollY/(h-g):0,S=window.performance?.timing?.domContentLoadedEventEnd,A=window.performance?.timing?.loadEventEnd,E=S?v-S:null,x=A?v-A:null;r.tc.lastAdClickTs=v;const P={stream:"tc_clicks"};P.clickSource=e,P.timestampInit=r.timestamps.started,P.clickTimestamp=v,P.cursorX=r.tc.cursorX||0,P.cursorY=r.tc.cursorY||0,P.mm2CookieA=r.visitor.getUserId(),P.unit=a,P.clickCount=r.tc._dailyAdClicks,P.isAbusive=i,P.userActivity=r.tc.fetchUserActivity(o,r.tc.activityCounter),P.docSize=p+"x"+h,P.viewPort=m+"x"+g,P.devicePixelRatio=window.devicePixelRatio||0,P.unitCoordinates=[c.x,c.y,c.width,c.height].toString(),P.isInterstitial=d,P.scriptLoadTs=r.timestamps.started,P.lastUserInteractionTs=r.timestamps.lastUserAction,P.lastAdClickTs=r.tc.lastAdClickTs,P.navigationStartTs=b,P.lastScrollEndTs=r.tc.lastScrollEndTs,P.lastPointerMoveTs=r.tc.lastPointerMoveTs,P.deltaSinceScriptLoad=w,P.deltaLastInteraction=f,P.deltaSinceLastAdClick=y,P.deltaPageLoad=k,P.deltaSinceScroll=C,P.deltaSincePointerMove=_,P.scrollDepthPercent=T,P.domContentLoadedTs=S,P.loadEventEndTs=A,P.deltaSinceDOMLoad=E,P.deltaSinceLoadEventEnd=x,r.logEvent(P,!1,!0),r.tc.lastAdClickId=P.id||"na",r.log("Setting up listener for BLUR","ad-clicks");const D=()=>{if(Date.now()-v<500){const t=Date.now();r.logEvent({stream:"tc_clicks_blur_event",clickTimestamp:v,blurTs:t,deltaBlurClick:t-v,unitId:a},!1,!0)}window.removeEventListener("blur",D)};window.addEventListener("blur",D)}fetchFingerprintData(){r.identityhash.fetchAvailableFonts(),r.identityhash.fetchBatteryDetails(),r.identityhash.fetchPermissionData(),r.identityhash.detectSupportedMediaDevices(),r.identityhash.detectSupportedAudioFormats(),r.identityhash.detectSupportedVideoFormats()}sendFingerprintData(){try{if(r.tc.getFingerPrintData()){const t=r.identityhash.getGpuUnmaskedInfo(),e=r.identityhash.getAudioContextOscialltor(),i=r.identityhash.getAudioFrequencyAnalyser();let o={audioContext:{},frequencyAnalyser:{},stream:"tc_fingerprints"};o.userAgent=navigator.userAgent||"",o.platform=r.identityhash.platform,o.cookieStorage=r.identityhash.cookieStorage,o.timezoneOffset=r.identityhash.timezoneOffset,o.language=r.identityhash.language,o.availableFonts=r.identityhash.availableFonts,o.availableFontsTime=r.identityhash.availableFontsTime,o.dnt=r.identityhash.dnt,o.navigatorProperties=r.identityhash.getNavigatorProperties(),o.buildId=navigator.buildID||-1,o.navigatorProduct=r.identityhash.navigatorProduct,o.navigatorSubproduct=r.identityhash.navigatorSubproduct,o.navigatorVendor=navigator.vendor||"",o.navigatorSubvendor=navigator.vendorSub||"",o.hardwareConcurrency=navigator.hardwareConcurrency||-1,o.javaEnabled=navigator.javaEnabled(),o.deviceMemory=navigator.deviceMemory||-1,o.pluginList=r.identityhash.getPluginList(),o.resolution=r.identityhash.resolution,o.colorDepth=r.identityhash.colorDepth,o.availTop=window.screenTop||-1,o.availLeft=window.screenLeft||-1,o.availHeight=window.screen.availHeight||-1,o.availWidth=window.screen.availWidth||-1,o.screenLeft=window.screen.left||-1,o.screenTop=window.screen.top||-1,o.permissionData=r.identityhash.permissionData,o.permissionDataTime=r.identityhash.permissionDataTime,o.vendor=t.vendor,o.renderer=t.renderer,o.sessionStorage=r.identityhash.sessionStorage,o.openDatabase=r.identityhash.openDatabase,o.supportedAudioFormats=r.identityhash.supportedAudioFormats,o.supportedAudioFormatsTime=r.identityhash.supportedAudioFormatsTime,e&&(o.audioContext.channelCount=e.channelCount,o.audioContext.channelCountMode=e.channelCountMode,o.audioContext.channelInterpretation=e.channelInterpretation,o.audioContext.maxChannelCount=e.maxChannelCount,o.audioContext.numberOfInputs=e.numberOfInputs,o.audioContext.numberOfOutputs=e.numberOfOutputs,o.audioContext.sampleRate=e.context&&e.context.sampleRate||-1,o.audioContext.numberOfOutputs=e.context&&e.context.state||"na",o.frequencyAnalyser.channelCount=i.channelCount||-1),i&&(o.frequencyAnalyser.channelCountMode=i.channelCountMode||"na",o.frequencyAnalyser.channelInterpretation=i.channelInterpretation||"na",o.frequencyAnalyser.fftSize=i.fftSize||-1,o.frequencyAnalyser.frequencyBinCount=i.frequencyBinCount||-1,o.frequencyAnalyser.maxDecibels=i.maxDecibels||-1,o.frequencyAnalyser.minDecibels=i.minDecibels||-1,o.frequencyAnalyser.numberOfInputs=i.numberOfInputs||-1,o.frequencyAnalyser.numberOfOutputs=i.numberOfOutputs||-1,o.frequencyAnalyser.smoothingTimeConstant=i.smoothingTimeConstant||-1),o.supportedVideoFormats=r.identityhash.supportedVideoFormats,o.supportedVideoFormatsTime=r.identityhash.supportedVideoFormatsTime,o.supportedMediaDevices=r.identityhash.supportedMediaDeviceList,o.supportedMediaDevicesTime=r.identityhash.supportedMediaDeviceListTime,o.isAccelerometerSupported=window.result&&window.result.accelerometer||!1,o.isGyroscopreSupported=window.result&&window.result.gyroscope||!1,o.isproximitySensorSupported=window.result&&window.result.proximity_sensor||!1,o.batteryLevel=r.identityhash.batteryLevel,o.batteryChargingTime=r.identityhash.batteryChargingTime,o.downlink=navigator.connection&&navigator.connection.downlink||-1,o.downlinkMax=navigator.connection&&navigator.connection.downlinkMax||-1,o.connectionEffectiveType=navigator.connection&&navigator.connection.effectiveType||"",o.rtt=navigator.connection&&navigator.connection.rtt||-1,o.key=window.key||"na",o.locationbarVisible=window.locationbar&&window.locationbar.visible||!1,o.menubarVisible=window.menubar&&window.menubar.visible||!1,o.personalbarVisible=window.personalbar&&window.personalbar.visible||!1,o.statusbarVisible=window.statusbar&&window.statusbar.visible||!1,o.toolbarVisible=window.toolbar&&window.toolbar.visible||!1,o.resultState=window.result&&window.result.state||!1,o.timestamp=r.timestamps.now(),o.mm2CookieA=r.visitor.getUserId(),o.featureDetectionString=r.tc.featureDetectionString,o.appName=r.identityhash.appName,o.appCodeName=r.identityhash.appCodeName,o.mimeTypeList=r.identityhash.getMimeTypes(),o.touchSupport=r.identityhash.touchSupport,o=r.appendBaseAnalytics(o),r.logEvent(o),r.log("Sending fingerprintData data to tc_fingerprint stream","tc")}}catch(t){t.code="tc-fingerprint-error",t.type="catch",r.logEvent(t)}}setupHoneyPot(){const t=document.createElement("a"),e=document.createTextNode("<!Ã¢â‚¬â€œ- Don't click me1 Ã¢â‚¬â€œ->");t.appendChild(e),t.title="Do not click me1!",t.id="hp1",t.href="#";const i=document.createElement("div");i.style.cssText="display:none",i.appendChild(t),r.tc.honeypot1=i,r.log("added honeypot-1","tc");const o=document.createElement("img");o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==",o.setAttribute("style","width:1px !important;height:1px !important;");const n=document.createElement("a");n.id="hp2",n.style.display="none",n.title="Don't click!",n.href="#",n.appendChild(o),r.tc.honeypot2=n,r.log("added honeypot-2","tc");const c=document.body;c.appendChild(window.pg.tc.honeypot1),c.appendChild(window.pg.tc.honeypot2),document.getElementById("hp1").addEventListener("click",(function(){window.pg.visitor.cookie("m2_honeypot",1,10)}),!1),document.getElementById("hp2").addEventListener("click",(function(){window.pg.visitor.cookie("m2_honeypot",1,10)}),!1)}calculateTiming(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=r.tc.now();return e?[t(),r.tc.now()-i]:(t(),r.tc.now()-i)}calculatePageTiming(){const t={};try{const e=["unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","redirectStart","redirectEnd","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd"];if(window.performance&&window.PerformanceNavigationTiming&&Array.isArray(window.performance.getEntriesByType("navigation"))&&window.performance.getEntriesByType("navigation").length>0){const i=performance.getEntriesByType("navigation")[0],o=i.connectStart;for(const n of e)n in i&&i[n]>o?t["timing-"+n]=i[n]-o:n in i||(t["timing-"+n]=-1);t.navType=i.type||"",t.navEntryType=i.entryType||"",t.navInitiatorType=i.initiatorType||"",t.navRedirectCount=i.redirectCount,t.navRenderBlockingStatus=i.renderBlockingStatus||""}}catch(t){}return t}getUserMedia(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?2:navigator.getUserMedia?1:0}calculateFps(){return new Promise(((t,e)=>{let i=0;const o=performance.now();requestAnimationFrame((function e(){i++;const n=(performance.now()-o)/1e3;n>=1?t({result:Math.round(i/n)}):requestAnimationFrame(e)}))}))}checkNavigatorComponents(){if(void 0===r.tc.navigatorComponents){r.tc.navigatorComponents="";const t=[],e=[];let i=navigator;for(;i;)Object.getOwnPropertyNames(i).forEach((e=>t.push(e))),i=Object.getPrototypeOf(i);for(let i=0;i<t.length;i++){const o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(navigator),t[i]);e.push(t[i],o?o.value?o.value.toString():o.get&&o.get.toString():"")}r.tc.navigatorComponents=e.join(" ")}return r.tc.navigatorComponents}hasFocus(){return"hasFocus"in document?document.hasFocus()?1:0:-1}getVisibilityState(){return void 0===document.visibilityState?"n/a":document.visibilityState}checkHidden(){let t;if(void 0!==document.hidden)t="hidden";else if(void 0!==document.mozHidden)t="mozHidden";else if(void 0!==document.msHidden)t="msHidden";else{if(void 0===document.webkitHidden)return-1;t="webkitHidden"}return document[t]?1:0}computeStyle(){return void 0===r.tc.computedStyle&&(r.tc.computedStyle="",window.getComputedStyle&&(r.tc.computedStyle=Array.from(getComputedStyle(document.body)).join(" "))),r.tc.computedStyle}getAncestorOrigins(){return location.ancestorOrigins?Array.from(location.ancestorOrigins).join(" "):"n/a"}checkApplePaySupport(){if(void 0!==window.ApplePaySession)try{const t=window.ApplePaySession.canMakePayments(),e=Array.from(Array(100).keys()).find((t=>window.ApplePaySession.supportsVersion(t+1)));r.tc.applePaySupported=t?1:0,void 0!==e&&(r.tc.applePayVersion=e+1)}catch(t){r.tc.applePaySupported=t}}checkMaxStack(){void 0===r.tc.maxStack&&requestAnimationFrame((function(){let t=0;try{!function e(){t++,e()}()}catch(e){r.tc.maxStack=t,r.tc.maxStackError=e.name+": "+e.message}}))}now(){return window.performance&&"function"==typeof performance.now?performance.now():(new Date).getTime()}isPhantom(){return window._phantom||window.callPhantom||window._callPhantom||window.__phantomas||!1}getWindowSize(){return document.documentElement.clientWidth+"x"+document.documentElement.clientHeight}getTcParamSampling(t){const e=[{min:0,max:10,value:1},{min:10,max:20,value:5},{min:20,max:30,value:2},{min:30,max:40,value:25},{min:40,max:50,value:12},{min:50,max:60,value:12},{min:60,max:70,value:5},{min:70,max:80,value:5},{min:80,max:90,value:12},{min:90,max:100,value:12}];for(const i of e)if(t>=i.min&&t<i.max)return Math.floor(100*Math.random())<=i.value;return!1}sampleTcParameters(t){if(!r.tc.getTcParamSampling(t))return!1;(async()=>{const t=await r.tc.calculateFps();r.tc.fps=t.result})(),r.tc.checkMaxStack(),window.setTimeout(r.tc.sendTcParameters,2e3)}sendTcParameters(){try{r.tc.checkApplePaySupport();const t=r.tc.calculatePageTiming();let e={};e.id=r.uuid4(),e.ancestorOrigin=r.tc.calculateTiming(r.tc.getAncestorOrigins),e.video=screen.width+"x"+screen.height+"x"+screen.colorDepth,e.isHidden=r.tc.calculateTiming(r.tc.checkHidden),e.visibilityState=r.tc.calculateTiming(r.tc.getVisibilityState),e.hasFocus=r.tc.calculateTiming(r.tc.hasFocus),e.window=r.tc.calculateTiming(r.tc.getWindowSize),e.devicePixelRatio=window.devicePixelRatio||-1,e.inner=window.innerWidth+"x"+window.innerHeight,e.outer=window.outerWidth+"x"+window.outerHeight,e.navigatorTiming=r.tc.calculateTiming(r.tc.checkNavigatorComponents,!1),e.navigatorHash=r.md5(r.tc.checkNavigatorComponents()),e.phantom=r.tc.calculateTiming(r.tc.isPhantom),e.performanceTiming=t,e.getUserMedia=r.tc.getUserMedia(),e.applePaySupport=r.tc.applePaySupported||!1,e.applePayVersion=r.tc.applePayVersion||-1,e.computeStyleTiming=r.tc.calculateTiming(r.tc.computeStyle,!1),e.computeStyleHash=r.md5(r.tc.computeStyle()),e.maxStack=r.tc.maxStack||-1,e.maxStackError=r.tc.maxStackError||"",e.framerate=r.tc.fps||-1,e.stream="tc_parameters",e=r.appendBaseAnalytics(e),r.logEvent(e)}catch(t){t.code="tc-parameters-error",t.type="catch",r.logEvent(t)}}sendModelData(t,e,i){try{t.previousIVT=t.previousIVT||{},t.previousIVT.ivtTrace=t.previousIVT.ivtTrace||r.visitor.cookie("m2_bot_reason")||"",t.previousIVT.botModel=t.previousIVT.botModel||r.visitor.cookie("m2_bot_model")||"",t.previousIVT.botPercent=t.previousIVT.botPercent||this.getBotPercent(),t.previousIVT.captchaSolved=t.previousIVT.captchaSolved||"true"==r.visitor.cookie("m2_captcha_solved")||!1,t.timestamp=(new Date).getTime(),t.quick_check=e,t.knn_check=i,Object.assign(t,r.tc.createDeviceData());const o=JSON.stringify(t);this._sendModelData(r.tc.trafficCopEndpoint,o)}catch(t){t.code="tc-request-sendModelData",t.type="catch",r.logEvent(t)}}_sendModelData(t,e,i){try{r.tc.latencyBeforeTc=r.timestamps.now()-r.timestamps.started,r.visitor.cookie("pg_latency_before_tc",r.tc.latencyBeforeTc,1);const o=r.timestamps.now(),n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),n.withCredentials=!0,n.timeout=5e3,n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)try{r.logResponseTimeEvent("tc",t,o);const e=JSON.parse(n.responseText);let i=e.bot_percent;const c=e.bot_reason,a=e.bot_model;r.visitor.pgUser||(r.visitor.pgUser=e.pg_user,r.visitor.cookie("pg_lava",r.visitor.pgUser,180)),0==i&&(i=i.toString(10)),r.visitor.cookie("m2_bot_percent",i,1),r.log("- IVT check response ["+i+"]","tc");let s=r.visitor.cookie("m2_bot_reason")||"";""==s?s=c:-1==s.indexOf(c)&&(s+=","+c),r.visitor.cookie("m2_bot_reason",s,10),r.visitor.cookie("m2_bot_model",a,1),r.tc.tcResponseTime=r.timestamps.now()-o,r.visitor.cookie("pg_tc_response_time",r.tc.tcResponseTime,1),"sbh"!=c&&"maciph"!=c||r.visitor.cookie("pg_tc_cb",!0,10),r.visitor.pgUser&&r.log("Detected pg user","tc"),i>r.publisher.trafficCopBotThreshold||r.get("pg_tc")?r.tc.showCaptcha():r.atq.xq()}catch(t){t.code="tc-request-parse-exception",t.type="catch",r.logEvent(t)}else{if((i||0)>=3)return void r.logEvent({code:"tc-request-fail",type:"catch",environment:{status:n.status,tries:i}});r.tc._sendModelData(t,e,(i||0)+1)}},n.send(e)}catch(t){t.code="tc-request-exception",t.type="catch",r.logEvent(t)}}getOnpageUnit(t){for(const e of this.onpageUnits)if(e.getTerms().indexOf(t)>-1)return e;return!1}isRewarded(t){return t.toLowerCase().includes("ward")||t.toLowerCase().includes("offer")}isInterstitial(t){if(t.autozone&&"interstitial"===t.autozone.toLowerCase())return!0;if(t.code.toLowerCase().includes("interstitial"))return!0;const e=window.location.href.includes("#google_vignette"),i=t&&t.node&&t.node.tagName&&"iframe"===t.node.tagName.toLowerCase()?t.node:t?.node?.querySelector?.("iframe")||null;return!!i&&(window.innerWidth===i.clientWidth&&window.innerHeight===i.clientHeight&&e)}slotRenderEnded(){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push((function(){window.googletag.pubads().addEventListener("slotRenderEnded",(function(t){r.atq.push((function(){const e=t.slot.getAdUnitPath();if(r.getUnit(e)||r.getDisabledUnit(e))return;let i=r.tc.getOnpageUnit(e);if(!i){const o=t.slot.getSlotElementId();i={code:e,node:document.getElementById(o),autozone:"off",renderCount:0,slot:o},i=new n(i),r.tc.onpageUnits.push(i)}i.renderCount++,i.renderedUnitAnalytics(i,t,"tc")}),"gpt_tc_slot_render_ended")}))}))}windowBlurHandler(){r.tc.blurTs=Date.now(),r.log("Blur event triggered","ad-clicks")}windowFocusHandler(){r.tc.focusReturnTs=Date.now();const t=((r.tc.blurTs-r.timestamps.adClick)/1e3).toFixed(2),e=((r.tc.focusReturnTs-r.tc.blurTs)/1e3).toFixed(2);if(r.log(`Page BlurTS is : ${r.tc.blurTs}`,"ad-clicks"),r.log(`Last Ad Click time is : ${r.timestamps.adClick}`,"ad-clicks"),r.log(`Ad click to focusLoose duration : ${t} seconds`,"ad-clicks"),r.log(`Focus returned: ${e} seconds`,"ad-clicks"),r.tc.blurTs>0&&r.timestamps.adClick&&t<=4&&e<=8){r.warn("User returned quickly after ad click - likely accidental","ad-clicks");const i={code:"tc_clicks_quick_user_return",type:"catch",environment:{focusLooseDurationSec:t,focusReturnDurationSec:e,deltaUserReturnSec:r.tc.focusReturnTs-r.tc.blurTs,blurTs:r.tc.blurTs,focusReturnTs:r.tc.focusReturnTs,adClickTs:r.timestamps.adClick,lastUserActionTs:r.timestamps.lastUserAction,lastPointerMoveTs:r.tc.lastPointerMoveTs,lastScrollEndTs:r.tc.lastScrollEndTs,clickId:r.tc.lastAdClickId}};r.logEvent(i)}}scrollEndHandler(){r.log("Scroll event ended","ad-clicks"),r.tc.lastScrollEndTs=Date.now()}}r.tc=new a})(),TrafficCop=e})();